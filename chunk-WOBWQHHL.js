import{a as Fe,b as Pe,c as Ht,d as jt,e as $t}from"./chunk-KCGF5SYH.js";import{e as Bt,f as Ft,g as Pt,h as At}from"./chunk-VS65NCQJ.js";import{$ as Be,D as Nt,Ha as It,Ia as Lt,Ka as Ot,La as Vt,N as ae,O as le,T as ze,V as Ce,W as Oe,X as Ve,Y as Tt,a as re,aa as vt,ca as xt,fa as Dt,ha as wt,ib as Rt,la as Et,m as oe,n as se,pa as Mt,sa as bt}from"./chunk-LQMJWFCQ.js";import{o as _t,p as Le,q as ge,t as kt}from"./chunk-WV4YJ4QP.js";import{$b as De,A as U,Aa as ot,Ab as Re,B as Je,Ba as B,Bb as p,Ca as E,Cb as ne,Da as M,Db as N,Ea as Te,Eb as ut,Gb as mt,Ha as ve,Hb as S,I as Xe,Ib as ft,Ic as H,Ja as _,Jb as gt,Ka as st,Kb as pe,Lb as ue,Ma as at,Mb as C,Mc as c,Nb as y,Nc as Ie,O as et,Ob as f,Pb as j,Qb as $,Sb as Q,Y as ke,Yb as q,Z as tt,_ as L,_b as l,ac as we,bc as zt,c as m,cb as lt,cc as Ee,db as xe,dc as me,ec as fe,f as G,fa as nt,fc as W,g as Se,ga as O,gb as h,gc as K,h as Ye,ha as A,hb as k,hc as Me,ic as ie,ja as Ne,jb as ct,la as b,lc as He,m as te,ma as he,mc as je,nb as dt,nc as $e,ob as ht,oc as Ct,pc as D,ra as x,rc as Ke,s as d,sa as R,sb as pt,sc as be,t as _e,ta as it,tc as yt,ua as rt,ub as F,wc as St,xb as u,xc as Y,z as Ze}from"./chunk-NPSVTU3I.js";import{a as de,e as g}from"./chunk-JKOY2XUY.js";var zn=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Cn=/([^\#-~ |!])/g;function yn(i){return i.replace(/&/g,"&amp;").replace(zn,o=>{let e=o.charCodeAt(0),t=o.charCodeAt(1);return`&#${(e-55296)*1024+(t-56320)+65536};`}).replace(Cn,o=>`&#${o.charCodeAt(0)};`).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var Kt=(()=>{class i{constructor(){this.UNIQUE_WRAPPERS=["##==-open_tag-==##","##==-close_tag-==##"]}transform(e,t,n,r){if(!t)return e;let s=new RegExp(t.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$&"),n),a=e.replace(s,`${this.UNIQUE_WRAPPERS[0]}$&${this.UNIQUE_WRAPPERS[1]}`);return yn(a).replace(new RegExp(this.UNIQUE_WRAPPERS[0],"g"),r?`<span class="${r}">`:"<span>").replace(new RegExp(this.UNIQUE_WRAPPERS[1],"g"),"</span>")}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275pipe=rt({name:"nzHighlight",type:i,pure:!0,standalone:!0})}}return i})(),Gt=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275mod=R({type:i})}static{this.\u0275inj=A({})}}return i})();var Z=class i{get treeService(){return this.service||this.parentNode&&this.parentNode.treeService}constructor(o,e=null,t=null){if(this._title="",this.level=0,this.parentNode=null,this._icon="",this._children=[],this._isLeaf=!1,this._isChecked=!1,this._isSelectable=!1,this._isDisabled=!1,this._isDisableCheckbox=!1,this._isExpanded=!1,this._isHalfChecked=!1,this._isSelected=!1,this._isLoading=!1,this.canHide=!1,this.isMatched=!1,this.service=null,o instanceof i)return o;this.service=t||null,this.origin=o,this.key=o.key,this.parentNode=e,this._title=o.title||"---",this._icon=o.icon||"",this._isLeaf=o.isLeaf||!1,this._children=[],this._isChecked=o.checked||!1,this._isSelectable=o.disabled||o.selectable!==!1,this._isDisabled=o.disabled||!1,this._isDisableCheckbox=o.disableCheckbox||!1,this._isExpanded=o.isLeaf?!1:o.expanded||!1,this._isHalfChecked=!1,this._isSelected=!o.disabled&&o.selected||!1,this._isLoading=!1,this.isMatched=!1,e?this.level=e.level+1:this.level=0,typeof o.children<"u"&&o.children!==null&&o.children.forEach(n=>{let r=this.treeService;r&&!r.isCheckStrictly&&o.checked&&!o.disabled&&!n.disabled&&!n.disableCheckbox&&(n.checked=o.checked),this._children.push(new i(n,this))})}get title(){return this._title}set title(o){this._title=o,this.update()}get icon(){return this._icon}set icon(o){this._icon=o,this.update()}get children(){return this._children}set children(o){this._children=o,this.update()}get isLeaf(){return this._isLeaf}set isLeaf(o){this._isLeaf=o,this.update()}get isChecked(){return this._isChecked}set isChecked(o){this._isChecked=o,this.origin.checked=o,this.afterValueChange("isChecked")}get isHalfChecked(){return this._isHalfChecked}set isHalfChecked(o){this._isHalfChecked=o,this.afterValueChange("isHalfChecked")}get isSelectable(){return this._isSelectable}set isSelectable(o){this._isSelectable=o,this.update()}get isDisabled(){return this._isDisabled}set isDisabled(o){this._isDisabled=o,this.update()}get isDisableCheckbox(){return this._isDisableCheckbox}set isDisableCheckbox(o){this._isDisableCheckbox=o,this.update()}get isExpanded(){return this._isExpanded}set isExpanded(o){this._isExpanded=o,this.origin.expanded=o,this.afterValueChange("isExpanded"),this.afterValueChange("reRender")}get isSelected(){return this._isSelected}set isSelected(o){this._isSelected=o,this.origin.selected=o,this.afterValueChange("isSelected")}get isLoading(){return this._isLoading}set isLoading(o){this._isLoading=o,this.update()}setSyncChecked(o=!1,e=!1){this.setChecked(o,e),this.treeService&&!this.treeService.isCheckStrictly&&this.treeService.conduct(this)}setChecked(o=!1,e=!1){this.origin.checked=o,this.isChecked=o,this.isHalfChecked=e}setExpanded(o){this._isExpanded=o,this.origin.expanded=o,this.afterValueChange("isExpanded")}getParentNode(){return this.parentNode}getChildren(){return this.children}addChildren(o,e=-1){this.isLeaf||(o.forEach(t=>{let n=s=>{s.getChildren().forEach(a=>{a.level=a.getParentNode().level+1,a.origin.level=a.level,n(a)})},r=t;r instanceof i?r.parentNode=this:r=new i(t,this),r.level=this.level+1,r.origin.level=r.level,n(r);try{e===-1?this.children.push(r):this.children.splice(e,0,r)}catch{}}),this.origin.children=this.getChildren().map(t=>t.origin),this.isLoading=!1),this.afterValueChange("addChildren"),this.afterValueChange("reRender")}clearChildren(){this.afterValueChange("clearChildren"),this.children=[],this.origin.children=[],this.afterValueChange("reRender")}remove(){let o=this.getParentNode();o&&(o.children=o.getChildren().filter(e=>e.key!==this.key),o.origin.children=o.origin.children.filter(e=>e.key!==this.key),this.afterValueChange("remove"),this.afterValueChange("reRender"))}afterValueChange(o){if(this.treeService)switch(o){case"isChecked":this.treeService.setCheckedNodeList(this);break;case"isHalfChecked":this.treeService.setHalfCheckedNodeList(this);break;case"isExpanded":this.treeService.setExpandedNodeList(this);break;case"isSelected":this.treeService.setNodeActive(this);break;case"clearChildren":this.treeService.afterRemove(this.getChildren());break;case"remove":this.treeService.afterRemove([this]);break;case"reRender":this.treeService.flattenTreeData(this.treeService.rootNodes,this.treeService.getExpandedNodeList().map(e=>e.key));break}this.update()}update(){this.component&&this.component.markForCheck()}};function Ge(i){let{isDisabled:o,isDisableCheckbox:e}=i;return!!(o||e)}function Ut(i,o){return o.length>0&&o.indexOf(i)>-1}function _n(i,o){return`${i}-${o}`}function kn(i,o){return i??o}function Ue(i=[],o=[]){let e=new Set(o===!0?[]:o),t=[];function n(r,s=null){return r.map((a,z)=>{let T=_n(s?s.pos:"0",z),I=kn(a.key,T);a.isStart=[...s?s.isStart:[],z===0],a.isEnd=[...s?s.isEnd:[],z===r.length-1];let v={parent:s,pos:T,children:[],data:a,isStart:[...s?s.isStart:[],z===0],isEnd:[...s?s.isEnd:[],z===r.length-1]};return t.push(v),o===!0||e.has(I)||a.isExpanded?v.children=n(a.children||[],v):v.children=[],v})}return n(i),t}var ce=(()=>{class i{constructor(){this.DRAG_SIDE_RANGE=.25,this.DRAG_MIN_GAP=2,this.isCheckStrictly=!1,this.isMultiple=!1,this.rootNodes=[],this.flattenNodes$=new Se([]),this.selectedNodeList=[],this.expandedNodeList=[],this.checkedNodeList=[],this.halfCheckedNodeList=[],this.matchedNodeList=[]}initTree(e){this.rootNodes=e,this.expandedNodeList=[],this.selectedNodeList=[],this.halfCheckedNodeList=[],this.checkedNodeList=[],this.matchedNodeList=[]}flattenTreeData(e,t=[]){this.flattenNodes$.next(Ue(e,t).map(n=>n.data))}getSelectedNode(){return this.selectedNode}getSelectedNodeList(){return this.conductNodeState("select")}getCheckedNodeKeys(){let e=[],t=this.getCheckedNodeList(),n=r=>{r.forEach(s=>{e.push(s.key),!(s.children.length<1)&&n(s.children)})};return n(t),e}getCheckedNodeList(){return this.conductNodeState("check")}getHalfCheckedNodeList(){return this.conductNodeState("halfCheck")}getExpandedNodeList(){return this.conductNodeState("expand")}getMatchedNodeList(){return this.conductNodeState("match")}isArrayOfNzTreeNode(e){return e.every(t=>t instanceof Z)}setSelectedNode(e){this.selectedNode=e}setNodeActive(e){!this.isMultiple&&e.isSelected&&(this.selectedNodeList.forEach(t=>{e.key!==t.key&&(t.isSelected=!1)}),this.selectedNodeList=[]),this.setSelectedNodeList(e,this.isMultiple)}setSelectedNodeList(e,t=!1){let n=this.getIndexOfArray(this.selectedNodeList,e.key);t?e.isSelected&&n===-1&&this.selectedNodeList.push(e):e.isSelected&&n===-1&&(this.selectedNodeList=[e]),e.isSelected||(this.selectedNodeList=this.selectedNodeList.filter(r=>r.key!==e.key))}setHalfCheckedNodeList(e){let t=this.getIndexOfArray(this.halfCheckedNodeList,e.key);e.isHalfChecked&&t===-1?this.halfCheckedNodeList.push(e):!e.isHalfChecked&&t>-1&&(this.halfCheckedNodeList=this.halfCheckedNodeList.filter(n=>e.key!==n.key))}setCheckedNodeList(e){let t=this.getIndexOfArray(this.checkedNodeList,e.key);e.isChecked&&t===-1?this.checkedNodeList.push(e):!e.isChecked&&t>-1&&(this.checkedNodeList=this.checkedNodeList.filter(n=>e.key!==n.key))}conductNodeState(e="check"){let t=[];switch(e){case"select":t=this.selectedNodeList;break;case"expand":t=this.expandedNodeList;break;case"match":t=this.matchedNodeList;break;case"check":t=this.checkedNodeList;let n=r=>{let s=r.getParentNode();return s?this.checkedNodeList.findIndex(a=>a.key===s.key)>-1?!0:n(s):!1};this.isCheckStrictly||(t=this.checkedNodeList.filter(r=>!n(r)));break;case"halfCheck":this.isCheckStrictly||(t=this.halfCheckedNodeList);break}return t}setExpandedNodeList(e){if(e.isLeaf)return;let t=this.getIndexOfArray(this.expandedNodeList,e.key);e.isExpanded&&t===-1?this.expandedNodeList.push(e):!e.isExpanded&&t>-1&&this.expandedNodeList.splice(t,1)}setMatchedNodeList(e){let t=this.getIndexOfArray(this.matchedNodeList,e.key);e.isMatched&&t===-1?this.matchedNodeList.push(e):!e.isMatched&&t>-1&&this.matchedNodeList.splice(t,1)}refreshCheckState(e=!1){e||this.checkedNodeList.forEach(t=>{this.conduct(t,e)})}conduct(e,t=!1){let n=e.isChecked;e&&!t&&(this.conductUp(e),this.conductDown(e,n))}conductUp(e){let t=e.getParentNode();t&&(Ge(t)||(t.children.every(n=>Ge(n)||!n.isHalfChecked&&n.isChecked)?(t.isChecked=!0,t.isHalfChecked=!1):t.children.some(n=>n.isHalfChecked||n.isChecked)?(t.isChecked=!1,t.isHalfChecked=!0):(t.isChecked=!1,t.isHalfChecked=!1)),this.setCheckedNodeList(t),this.setHalfCheckedNodeList(t),this.conductUp(t))}conductDown(e,t){Ge(e)||(e.isChecked=t,e.isHalfChecked=!1,this.setCheckedNodeList(e),this.setHalfCheckedNodeList(e),e.children.forEach(n=>{this.conductDown(n,t)}))}afterRemove(e){let t=n=>{this.selectedNodeList=this.selectedNodeList.filter(r=>r.key!==n.key),this.expandedNodeList=this.expandedNodeList.filter(r=>r.key!==n.key),this.checkedNodeList=this.checkedNodeList.filter(r=>r.key!==n.key),n.children&&n.children.forEach(r=>{t(r)})};e.forEach(n=>{t(n)}),this.refreshCheckState(this.isCheckStrictly)}refreshDragNode(e){e.children.length===0?this.conductUp(e):e.children.forEach(t=>{this.refreshDragNode(t)})}resetNodeLevel(e){let t=e.getParentNode();t?e.level=t.level+1:e.level=0;for(let n of e.children)this.resetNodeLevel(n)}calcDropPosition(e){let{clientY:t}=e,{top:n,bottom:r,height:s}=e.target.getBoundingClientRect(),a=Math.max(s*this.DRAG_SIDE_RANGE,this.DRAG_MIN_GAP);return t<=n+a?-1:t>=r-a?1:0}dropAndApply(e,t=-1){if(!e||t>1)return;let n=e.treeService,r=e.getParentNode(),s=this.selectedNode.getParentNode();switch(s?s.children=s.children.filter(a=>a.key!==this.selectedNode.key):this.rootNodes=this.rootNodes.filter(a=>a.key!==this.selectedNode.key),t){case 0:e.addChildren([this.selectedNode]),this.resetNodeLevel(e);break;case-1:case 1:let a=t===1?1:0;if(r){r.addChildren([this.selectedNode],r.children.indexOf(e)+a);let z=this.selectedNode.getParentNode();z&&this.resetNodeLevel(z)}else{let z=this.rootNodes.indexOf(e)+a;this.rootNodes.splice(z,0,this.selectedNode),this.rootNodes[z].parentNode=null,this.resetNodeLevel(this.rootNodes[z])}break}this.rootNodes.forEach(a=>{a.treeService||(a.service=n),this.refreshDragNode(a)})}formatEvent(e,t,n){let r={eventName:e,node:t,event:n};switch(e){case"dragstart":case"dragenter":case"dragover":case"dragleave":case"drop":case"dragend":Object.assign(r,{dragNode:this.getSelectedNode()});break;case"click":case"dblclick":Object.assign(r,{selectedKeys:this.selectedNodeList}),Object.assign(r,{nodes:this.selectedNodeList}),Object.assign(r,{keys:this.selectedNodeList.map(a=>a.key)});break;case"check":let s=this.getCheckedNodeList();Object.assign(r,{checkedKeys:s}),Object.assign(r,{nodes:s}),Object.assign(r,{keys:s.map(a=>a.key)});break;case"search":Object.assign(r,{matchedKeys:this.getMatchedNodeList()}),Object.assign(r,{nodes:this.getMatchedNodeList()}),Object.assign(r,{keys:this.getMatchedNodeList().map(a=>a.key)});break;case"expand":Object.assign(r,{nodes:this.expandedNodeList}),Object.assign(r,{keys:this.expandedNodeList.map(a=>a.key)});break}return r}getIndexOfArray(e,t){return e.findIndex(n=>n.key===t)}conductCheck(e,t){this.checkedNodeList=[],this.halfCheckedNodeList=[];let n=r=>{r.forEach(s=>{e===null?s.isChecked=!!s.origin.checked:Ut(s.key,e||[])?(s.isChecked=!0,s.isHalfChecked=!1):(s.isChecked=!1,s.isHalfChecked=!1),s.children.length>0&&n(s.children)})};n(this.rootNodes),this.refreshCheckState(t)}conductExpandedKeys(e=[]){let t=new Set(e===!0?[]:e);this.expandedNodeList=[];let n=r=>{r.forEach(s=>{s.setExpanded(e===!0||t.has(s.key)||s.isExpanded===!0),s.isExpanded&&this.setExpandedNodeList(s),s.children.length>0&&n(s.children)})};n(this.rootNodes)}conductSelectedKeys(e,t){this.selectedNodeList.forEach(r=>r.isSelected=!1),this.selectedNodeList=[];let n=r=>r.every(s=>{if(Ut(s.key,e)){if(s.isSelected=!0,this.setSelectedNodeList(s),!t)return!1}else s.isSelected=!1;return s.children.length>0?n(s.children):!0});n(this.rootNodes)}expandNodeAllParentBySearch(e){let t=n=>{if(n&&(n.canHide=!1,n.setExpanded(!0),this.setExpandedNodeList(n),n.getParentNode()))return t(n.getParentNode())};t(e.getParentNode())}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275prov=O({token:i,factory:i.\u0275fac})}}return i})(),qt=new Ne("NzTreeHigherOrder"),Ae=class{constructor(o){this.nzTreeService=o}coerceTreeNodes(o){let e=[];return this.nzTreeService.isArrayOfNzTreeNode(o)?e=o.map(t=>(t.service=this.nzTreeService,t)):e=o.map(t=>new Z(t,null,this.nzTreeService)),e}getTreeNodes(){return this.nzTreeService.rootNodes}getTreeNodeByKey(o){let e=[],t=n=>{e.push(n),n.getChildren().forEach(r=>{t(r)})};return this.getTreeNodes().forEach(n=>{t(n)}),e.find(n=>n.key===o)||null}getCheckedNodeList(){return this.nzTreeService.getCheckedNodeList()}getSelectedNodeList(){return this.nzTreeService.getSelectedNodeList()}getHalfCheckedNodeList(){return this.nzTreeService.getHalfCheckedNodeList()}getExpandedNodeList(){return this.nzTreeService.getExpandedNodeList()}getMatchedNodeList(){return this.nzTreeService.getMatchedNodeList()}};function xn(i,o){if(i&1&&f(0,"span"),i&2){let e=o.$index,t=l();N("ant-tree-indent-unit",!t.nzSelectMode)("ant-select-tree-indent-unit",t.nzSelectMode)("ant-select-tree-indent-unit-start",t.nzSelectMode&&t.nzIsStart[e])("ant-tree-indent-unit-start",!t.nzSelectMode&&t.nzIsStart[e])("ant-select-tree-indent-unit-end",t.nzSelectMode&&t.nzIsEnd[e])("ant-tree-indent-unit-end",!t.nzSelectMode&&t.nzIsEnd[e])}}var Yt=["builtin",""],qe=(i,o)=>({$implicit:i,origin:o});function Dn(i,o){if(i&1&&(j(0),f(1,"span",2),$()),i&2){let e=l(3);h(),N("ant-select-tree-switcher-icon",e.nzSelectMode)("ant-tree-switcher-icon",!e.nzSelectMode)}}function wn(i,o){if(i&1&&u(0,Dn,2,4,"ng-container",1),i&2){let e=l(2);p("nzStringTemplateOutlet",e.nzExpandedIcon)("nzStringTemplateOutletContext",be(2,qe,e.context,e.context.origin))}}function En(i,o){i&1&&f(0,"span",0),i&2&&p("nzSpin",!0)}function Mn(i,o){if(i&1&&u(0,wn,1,5,"ng-container")(1,En,1,1,"span",0),i&2){let e=l();S(e.isLoading?1:0)}}function bn(i,o){if(i&1&&f(0,"span",3),i&2){let e=l(4);p("nzType",e.isSwitcherOpen?"minus-square":"plus-square")}}function In(i,o){i&1&&f(0,"span",4)}function Ln(i,o){if(i&1&&(j(0),u(1,bn,1,1,"span",3)(2,In,1,0,"span",4),$()),i&2){let e=l(3);h(),S(e.isShowLineIcon?1:2)}}function On(i,o){if(i&1&&u(0,Ln,3,1,"ng-container",1),i&2){let e=l(2);p("nzStringTemplateOutlet",e.nzExpandedIcon)("nzStringTemplateOutletContext",be(2,qe,e.context,e.context.origin))}}function Vn(i,o){i&1&&f(0,"span",0),i&2&&p("nzSpin",!0)}function Bn(i,o){if(i&1&&u(0,On,1,5,"ng-container")(1,Vn,1,1,"span",0),i&2){let e=l();S(e.isLoading?1:0)}}function Fn(i,o){}function Pn(i,o){if(i&1&&(C(0,"span")(1,"span"),f(2,"span",4),y()()),i&2){let e=l(2);N("ant-tree-icon__open",e.isSwitcherOpen)("ant-tree-icon__close",e.isSwitcherClose)("ant-tree-icon_loading",e.isLoading)("ant-select-tree-iconEle",e.selectMode)("ant-tree-iconEle",!e.selectMode),h(),N("ant-select-tree-iconEle",e.selectMode)("ant-select-tree-icon__customize",e.selectMode)("ant-tree-iconEle",!e.selectMode)("ant-tree-icon__customize",!e.selectMode),h(),p("nzType",e.icon)}}function An(i,o){if(i&1&&(u(0,Pn,3,19,"span",3),f(1,"span",1),yt(2,"nzHighlight")),i&2){let e=l();S(e.icon&&e.showIcon?0:-1),h(),p("innerHTML",St(2,2,e.title,e.matchedValue,"i","font-highlight"),lt)}}function Rn(i,o){if(i&1&&f(0,"nz-tree-drop-indicator",2),i&2){let e=l();p("dropPosition",e.dragPosition)("level",e.context.level)}}function Hn(i,o){if(i&1){let e=Q();C(0,"nz-tree-node-switcher",4),q("click",function(n){E(e);let r=l();return M(r.clickExpand(n))}),y()}if(i&2){let e=l();p("nzShowExpand",e.nzShowExpand)("nzShowLine",e.nzShowLine)("nzExpandedIcon",e.nzExpandedIcon)("nzSelectMode",e.nzSelectMode)("context",e.nzTreeNode)("isLeaf",e.isLeaf)("isExpanded",e.isExpanded)("isLoading",e.isLoading)}}function jn(i,o){if(i&1){let e=Q();C(0,"nz-tree-node-checkbox",5),q("click",function(n){E(e);let r=l();return M(r.clickCheckBox(n))}),y()}if(i&2){let e=l();p("nzSelectMode",e.nzSelectMode)("isChecked",e.isChecked)("isHalfChecked",e.isHalfChecked)("isDisabled",e.isDisabled)("isDisableCheckbox",e.isDisableCheckbox)}}var $n=["nzTreeTemplate"],Zt=i=>({$implicit:i});function Kn(i,o){}function Gn(i,o){if(i&1&&(j(0),u(1,Kn,0,0,"ng-template",10),$()),i&2){let e=o.$implicit;l(2);let t=W(9);h(),p("ngTemplateOutlet",t)("ngTemplateOutletContext",Ke(2,Zt,e))}}function Un(i,o){if(i&1&&(C(0,"cdk-virtual-scroll-viewport",8),u(1,Gn,2,4,"ng-container",9),y()),i&2){let e=l();ne("height",e.nzVirtualHeight),N("ant-select-tree-list-holder-inner",e.nzSelectMode)("ant-tree-list-holder-inner",!e.nzSelectMode),p("itemSize",e.nzVirtualItemSize)("minBufferPx",e.nzVirtualMinBufferPx)("maxBufferPx",e.nzVirtualMaxBufferPx),h(),p("cdkVirtualForOf",e.nzFlattenNodes)("cdkVirtualForTrackBy",e.trackByFlattenNode)}}function qn(i,o){}function Wn(i,o){if(i&1&&u(0,qn,0,0,"ng-template",10),i&2){let e=o.$implicit;l(2);let t=W(9);p("ngTemplateOutlet",t)("ngTemplateOutletContext",Ke(2,Zt,e))}}function Qn(i,o){if(i&1&&(C(0,"div",11),pe(1,Wn,1,4,null,10,mt().trackByFlattenNode,!0),y()),i&2){let e=l();N("ant-select-tree-list-holder-inner",e.nzSelectMode)("ant-tree-list-holder-inner",!e.nzSelectMode),p("@.disabled",e.beforeInit||!!(e.noAnimation!=null&&e.noAnimation.nzNoAnimation))("nzNoAnimation",e.noAnimation==null?null:e.noAnimation.nzNoAnimation)("@treeCollapseMotion",e.nzFlattenNodes.length),h(),ue(e.nzFlattenNodes)}}function Yn(i,o){if(i&1){let e=Q();C(0,"nz-tree-node",12),q("nzExpandChange",function(n){E(e);let r=l();return M(r.eventTriggerChanged(n))})("nzClick",function(n){E(e);let r=l();return M(r.eventTriggerChanged(n))})("nzDblClick",function(n){E(e);let r=l();return M(r.eventTriggerChanged(n))})("nzContextMenu",function(n){E(e);let r=l();return M(r.eventTriggerChanged(n))})("nzCheckBoxChange",function(n){E(e);let r=l();return M(r.eventTriggerChanged(n))})("nzOnDragStart",function(n){E(e);let r=l();return M(r.eventTriggerChanged(n))})("nzOnDragEnter",function(n){E(e);let r=l();return M(r.eventTriggerChanged(n))})("nzOnDragOver",function(n){E(e);let r=l();return M(r.eventTriggerChanged(n))})("nzOnDragLeave",function(n){E(e);let r=l();return M(r.eventTriggerChanged(n))})("nzOnDragEnd",function(n){E(e);let r=l();return M(r.eventTriggerChanged(n))})("nzOnDrop",function(n){E(e);let r=l();return M(r.eventTriggerChanged(n))}),y()}if(i&2){let e=o.$implicit,t=l();p("icon",e.icon)("title",e.title)("isLoading",e.isLoading)("isSelected",e.isSelected)("isDisabled",e.isDisabled)("isMatched",e.isMatched)("isExpanded",e.isExpanded)("isLeaf",e.isLeaf)("isStart",e.isStart)("isEnd",e.isEnd)("isChecked",e.isChecked)("isHalfChecked",e.isHalfChecked)("isDisableCheckbox",e.isDisableCheckbox)("isSelectable",e.isSelectable)("canHide",e.canHide)("nzTreeNode",e)("nzSelectMode",t.nzSelectMode)("nzShowLine",t.nzShowLine)("nzExpandedIcon",t.nzExpandedIcon)("nzDraggable",t.nzDraggable)("nzCheckable",t.nzCheckable)("nzShowExpand",t.nzShowExpand)("nzAsyncData",t.nzAsyncData)("nzSearchValue",t.nzSearchValue)("nzHideUnMatched",t.nzHideUnMatched)("nzBeforeDrop",t.nzBeforeDrop)("nzShowIcon",t.nzShowIcon)("nzTreeTemplate",t.nzTreeTemplate||t.nzTreeTemplateChild)}}var Zn=(()=>{class i{constructor(e){this.cdr=e,this.level=1,this.direction="ltr",this.style={}}ngOnChanges(e){this.renderIndicator(this.dropPosition,this.direction)}renderIndicator(e,t="ltr"){let r=t==="ltr"?"left":"right",s=t==="ltr"?"right":"left",a={[r]:"4px",[s]:"0px"};switch(e){case-1:a.top="-3px";break;case 1:a.bottom="-3px";break;case 0:a.bottom="-3px",a[r]="28px";break;default:a.display="none";break}this.style=a,this.cdr.markForCheck()}static{this.\u0275fac=function(t){return new(t||i)(k(H))}}static{this.\u0275cmp=x({type:i,selectors:[["nz-tree-drop-indicator"]],hostVars:4,hostBindings:function(t,n){t&2&&(ut(n.style),N("ant-tree-drop-indicator",!0))},inputs:{dropPosition:"dropPosition",level:[2,"level","level",Ie],direction:"direction"},exportAs:["NzTreeDropIndicator"],standalone:!0,features:[F,B,D],decls:0,vars:0,template:function(t,n){},encapsulation:2,changeDetection:0})}}return i})(),Jn=(()=>{class i{constructor(){this.nzTreeLevel=0,this.nzIsStart=[],this.nzIsEnd=[],this.nzSelectMode=!1,this.listOfUnit=[]}ngOnChanges(e){let{nzTreeLevel:t}=e;t&&(this.listOfUnit=[...new Array(t.currentValue||0)])}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275cmp=x({type:i,selectors:[["nz-tree-indent"]],hostVars:5,hostBindings:function(t,n){t&2&&(Re("aria-hidden",!0),N("ant-tree-indent",!n.nzSelectMode)("ant-select-tree-indent",n.nzSelectMode))},inputs:{nzTreeLevel:"nzTreeLevel",nzIsStart:"nzIsStart",nzIsEnd:"nzIsEnd",nzSelectMode:"nzSelectMode"},exportAs:["nzTreeIndent"],standalone:!0,features:[B,D],decls:2,vars:0,consts:[[3,"ant-tree-indent-unit","ant-select-tree-indent-unit","ant-select-tree-indent-unit-start","ant-tree-indent-unit-start","ant-select-tree-indent-unit-end","ant-tree-indent-unit-end"]],template:function(t,n){t&1&&pe(0,xn,1,12,"span",0,ft),t&2&&ue(n.listOfUnit)},encapsulation:2,changeDetection:0})}}return i})(),Xn=(()=>{class i{constructor(){this.nzSelectMode=!1}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275cmp=x({type:i,selectors:[["nz-tree-node-checkbox","builtin",""]],hostVars:16,hostBindings:function(t,n){t&2&&N("ant-select-tree-checkbox",n.nzSelectMode)("ant-select-tree-checkbox-checked",n.nzSelectMode&&n.isChecked)("ant-select-tree-checkbox-indeterminate",n.nzSelectMode&&n.isHalfChecked)("ant-select-tree-checkbox-disabled",n.nzSelectMode&&(n.isDisabled||n.isDisableCheckbox))("ant-tree-checkbox",!n.nzSelectMode)("ant-tree-checkbox-checked",!n.nzSelectMode&&n.isChecked)("ant-tree-checkbox-indeterminate",!n.nzSelectMode&&n.isHalfChecked)("ant-tree-checkbox-disabled",!n.nzSelectMode&&(n.isDisabled||n.isDisableCheckbox))},inputs:{nzSelectMode:"nzSelectMode",isChecked:[2,"isChecked","isChecked",c],isHalfChecked:[2,"isHalfChecked","isHalfChecked",c],isDisabled:[2,"isDisabled","isDisabled",c],isDisableCheckbox:[2,"isDisableCheckbox","isDisableCheckbox",c]},standalone:!0,features:[F,D],attrs:Yt,decls:1,vars:4,template:function(t,n){t&1&&f(0,"span"),t&2&&N("ant-tree-checkbox-inner",!n.nzSelectMode)("ant-select-tree-checkbox-inner",n.nzSelectMode)},encapsulation:2,changeDetection:0})}}return i})(),Jt=(()=>{class i{constructor(){this.nzSelectMode=!1}get isShowLineIcon(){return!this.isLeaf&&!!this.nzShowLine}get isShowSwitchIcon(){return!this.isLeaf&&!this.nzShowLine}get isSwitcherOpen(){return!!this.isExpanded&&!this.isLeaf}get isSwitcherClose(){return!this.isExpanded&&!this.isLeaf}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275cmp=x({type:i,selectors:[["nz-tree-node-switcher"]],hostVars:16,hostBindings:function(t,n){t&2&&N("ant-select-tree-switcher",n.nzSelectMode)("ant-select-tree-switcher-noop",n.nzSelectMode&&n.isLeaf)("ant-select-tree-switcher_open",n.nzSelectMode&&n.isSwitcherOpen)("ant-select-tree-switcher_close",n.nzSelectMode&&n.isSwitcherClose)("ant-tree-switcher",!n.nzSelectMode)("ant-tree-switcher-noop",!n.nzSelectMode&&n.isLeaf)("ant-tree-switcher_open",!n.nzSelectMode&&n.isSwitcherOpen)("ant-tree-switcher_close",!n.nzSelectMode&&n.isSwitcherClose)},inputs:{nzShowExpand:[2,"nzShowExpand","nzShowExpand",c],nzShowLine:[2,"nzShowLine","nzShowLine",c],nzExpandedIcon:"nzExpandedIcon",nzSelectMode:"nzSelectMode",context:"context",isLeaf:[2,"isLeaf","isLeaf",c],isLoading:[2,"isLoading","isLoading",c],isExpanded:[2,"isExpanded","isExpanded",c]},standalone:!0,features:[F,D],decls:2,vars:2,consts:[["nz-icon","","nzType","loading",1,"ant-tree-switcher-loading-icon",3,"nzSpin"],[4,"nzStringTemplateOutlet","nzStringTemplateOutletContext"],["nz-icon","","nzType","caret-down"],["nz-icon","",1,"ant-tree-switcher-line-icon",3,"nzType"],["nz-icon","","nzType","file",1,"ant-tree-switcher-line-icon"]],template:function(t,n){t&1&&u(0,Mn,2,1)(1,Bn,2,1),t&2&&(S(n.isShowSwitchIcon?0:-1),h(),S(n.nzShowLine?1:-1))},dependencies:[Ce,ze,se,oe],encapsulation:2,changeDetection:0})}}return i})(),Xt=(()=>{class i{get canDraggable(){return this.draggable&&!this.isDisabled?!0:null}get matchedValue(){return this.isMatched?this.searchValue:""}get isSwitcherOpen(){return this.isExpanded&&!this.isLeaf}get isSwitcherClose(){return!this.isExpanded&&!this.isLeaf}constructor(e){this.cdr=e,this.treeTemplate=null,this.selectMode=!1,this.showIndicator=!0}ngOnChanges(e){let{showIndicator:t,dragPosition:n}=e;(t||n)&&this.cdr.markForCheck()}static{this.\u0275fac=function(t){return new(t||i)(k(H))}}static{this.\u0275cmp=x({type:i,selectors:[["nz-tree-node-title"]],hostVars:21,hostBindings:function(t,n){t&2&&(Re("title",n.title)("draggable",n.canDraggable)("aria-grabbed",n.canDraggable),N("draggable",n.canDraggable)("ant-select-tree-node-content-wrapper",n.selectMode)("ant-select-tree-node-content-wrapper-open",n.selectMode&&n.isSwitcherOpen)("ant-select-tree-node-content-wrapper-close",n.selectMode&&n.isSwitcherClose)("ant-select-tree-node-selected",n.selectMode&&n.isSelected)("ant-tree-node-content-wrapper",!n.selectMode)("ant-tree-node-content-wrapper-open",!n.selectMode&&n.isSwitcherOpen)("ant-tree-node-content-wrapper-close",!n.selectMode&&n.isSwitcherClose)("ant-tree-node-selected",!n.selectMode&&n.isSelected))},inputs:{searchValue:"searchValue",treeTemplate:"treeTemplate",draggable:[2,"draggable","draggable",c],showIcon:[2,"showIcon","showIcon",c],selectMode:"selectMode",context:"context",icon:"icon",title:"title",isLoading:[2,"isLoading","isLoading",c],isSelected:[2,"isSelected","isSelected",c],isDisabled:[2,"isDisabled","isDisabled",c],isMatched:[2,"isMatched","isMatched",c],isExpanded:[2,"isExpanded","isExpanded",c],isLeaf:[2,"isLeaf","isLeaf",c],showIndicator:"showIndicator",dragPosition:"dragPosition"},standalone:!0,features:[F,B,D],decls:3,vars:7,consts:[[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"ant-tree-title",3,"innerHTML"],[3,"dropPosition","level"],[3,"ant-tree-icon__open","ant-tree-icon__close","ant-tree-icon_loading","ant-select-tree-iconEle","ant-tree-iconEle"],["nz-icon","",3,"nzType"]],template:function(t,n){t&1&&u(0,Fn,0,0,"ng-template",0)(1,An,3,7,"span",1)(2,Rn,1,2,"nz-tree-drop-indicator",2),t&2&&(p("ngTemplateOutlet",n.treeTemplate)("ngTemplateOutletContext",be(4,qe,n.context,n.context.origin)),h(),S(n.treeTemplate?-1:1),h(),S(n.showIndicator?2:-1))},dependencies:[ge,Ce,ze,Gt,Kt,Zn],encapsulation:2,changeDetection:0})}}return i})(),en=(()=>{class i{get displayStyle(){return this.nzSearchValue&&this.nzHideUnMatched&&!this.isMatched&&!this.isExpanded&&this.canHide?"none":""}get isSwitcherOpen(){return this.isExpanded&&!this.isLeaf}get isSwitcherClose(){return!this.isExpanded&&!this.isLeaf}clickExpand(e){e.preventDefault(),!this.isLoading&&!this.isLeaf&&(this.nzAsyncData&&this.nzTreeNode.children.length===0&&!this.isExpanded&&(this.nzTreeNode.isLoading=!0),this.nzTreeNode.setExpanded(!this.isExpanded)),this.nzTreeService.setExpandedNodeList(this.nzTreeNode);let t=this.nzTreeService.formatEvent("expand",this.nzTreeNode,e);this.nzExpandChange.emit(t)}clickSelect(e){e.preventDefault(),this.isSelectable&&!this.isDisabled&&(this.nzTreeNode.isSelected=!this.nzTreeNode.isSelected),this.nzTreeService.setSelectedNodeList(this.nzTreeNode);let t=this.nzTreeService.formatEvent("click",this.nzTreeNode,e);this.nzClick.emit(t)}dblClick(e){e.preventDefault();let t=this.nzTreeService.formatEvent("dblclick",this.nzTreeNode,e);this.nzDblClick.emit(t)}contextMenu(e){e.preventDefault();let t=this.nzTreeService.formatEvent("contextmenu",this.nzTreeNode,e);this.nzContextMenu.emit(t)}clickCheckBox(e){if(e.preventDefault(),this.isDisabled||this.isDisableCheckbox)return;this.nzTreeNode.isChecked=!this.nzTreeNode.isChecked,this.nzTreeNode.isHalfChecked=!1,this.nzTreeService.setCheckedNodeList(this.nzTreeNode);let t=this.nzTreeService.formatEvent("check",this.nzTreeNode,e);this.nzCheckBoxChange.emit(t)}clearDragClass(){["drag-over-gap-top","drag-over-gap-bottom","drag-over","drop-target"].forEach(t=>{this.renderer.removeClass(this.elementRef.nativeElement,t)})}handleDragStart(e){try{e.dataTransfer.setData("text/plain",this.nzTreeNode.key)}catch{}this.nzTreeService.setSelectedNode(this.nzTreeNode),this.draggingKey=this.nzTreeNode.key;let t=this.nzTreeService.formatEvent("dragstart",this.nzTreeNode,e);this.nzOnDragStart.emit(t)}handleDragEnter(e){e.preventDefault(),this.showIndicator=this.nzTreeNode.key!==this.nzTreeService.getSelectedNode()?.key,this.renderIndicator(2),this.ngZone.run(()=>{let t=this.nzTreeService.formatEvent("dragenter",this.nzTreeNode,e);this.nzOnDragEnter.emit(t)})}handleDragOver(e){e.preventDefault();let t=this.nzTreeService.calcDropPosition(e);this.dragPos!==t&&(this.clearDragClass(),this.renderIndicator(t),this.dragPos===0&&this.isLeaf||(this.renderer.addClass(this.elementRef.nativeElement,this.dragPosClass[this.dragPos]),this.renderer.addClass(this.elementRef.nativeElement,"drop-target")));let n=this.nzTreeService.formatEvent("dragover",this.nzTreeNode,e);this.nzOnDragOver.emit(n)}handleDragLeave(e){e.preventDefault(),this.renderIndicator(2),this.clearDragClass();let t=this.nzTreeService.formatEvent("dragleave",this.nzTreeNode,e);this.nzOnDragLeave.emit(t)}handleDragDrop(e){e.preventDefault(),e.stopPropagation(),this.ngZone.run(()=>{this.showIndicator=!1,this.clearDragClass();let t=this.nzTreeService.getSelectedNode();if(!t||t&&t.key===this.nzTreeNode.key||this.dragPos===0&&this.isLeaf)return;let n=this.nzTreeService.formatEvent("drop",this.nzTreeNode,e),r=this.nzTreeService.formatEvent("dragend",this.nzTreeNode,e);this.nzBeforeDrop?this.nzBeforeDrop({dragNode:this.nzTreeService.getSelectedNode(),node:this.nzTreeNode,pos:this.dragPos}).subscribe(s=>{s&&this.nzTreeService.dropAndApply(this.nzTreeNode,this.dragPos),this.nzOnDrop.emit(n),this.nzOnDragEnd.emit(r)}):this.nzTreeNode&&(this.nzTreeService.dropAndApply(this.nzTreeNode,this.dragPos),this.nzOnDrop.emit(n))})}handleDragEnd(e){e.preventDefault(),this.ngZone.run(()=>{if(this.nzBeforeDrop)this.draggingKey=null,this.markForCheck();else{this.draggingKey=null;let t=this.nzTreeService.formatEvent("dragend",this.nzTreeNode,e);this.nzOnDragEnd.emit(t)}})}handDragEvent(){this.ngZone.runOutsideAngular(()=>{if(this.nzDraggable){let e=this.elementRef.nativeElement;this.destroy$=new G,U(e,"dragstart").pipe(L(this.destroy$)).subscribe(t=>this.handleDragStart(t)),U(e,"dragenter").pipe(L(this.destroy$)).subscribe(t=>this.handleDragEnter(t)),U(e,"dragover").pipe(L(this.destroy$)).subscribe(t=>this.handleDragOver(t)),U(e,"dragleave").pipe(L(this.destroy$)).subscribe(t=>this.handleDragLeave(t)),U(e,"drop").pipe(L(this.destroy$)).subscribe(t=>this.handleDragDrop(t)),U(e,"dragend").pipe(L(this.destroy$)).subscribe(t=>this.handleDragEnd(t))}else this.destroy$.next(!0),this.destroy$.complete()})}markForCheck(){this.cdr.markForCheck()}constructor(e,t,n,r,s){this.nzTreeService=e,this.ngZone=t,this.renderer=n,this.elementRef=r,this.cdr=s,this.icon="",this.title="",this.isLoading=!1,this.isSelected=!1,this.isDisabled=!1,this.isMatched=!1,this.isStart=[],this.isEnd=[],this.nzHideUnMatched=!1,this.nzNoAnimation=!1,this.nzSelectMode=!1,this.nzShowIcon=!1,this.nzTreeTemplate=null,this.nzSearchValue="",this.nzDraggable=!1,this.nzClick=new _,this.nzDblClick=new _,this.nzContextMenu=new _,this.nzCheckBoxChange=new _,this.nzExpandChange=new _,this.nzOnDragStart=new _,this.nzOnDragEnter=new _,this.nzOnDragOver=new _,this.nzOnDragLeave=new _,this.nzOnDrop=new _,this.nzOnDragEnd=new _,this.destroy$=new G,this.dragPos=2,this.dragPosClass={0:"drag-over",1:"drag-over-gap-bottom","-1":"drag-over-gap-top"},this.draggingKey=null,this.showIndicator=!1,this.noAnimation=he(Oe,{host:!0,optional:!0})}ngOnInit(){this.nzTreeNode.component=this,this.ngZone.runOutsideAngular(()=>{U(this.elementRef.nativeElement,"mousedown").pipe(L(this.destroy$)).subscribe(e=>{this.nzSelectMode&&e.preventDefault()})})}ngOnChanges(e){let{nzDraggable:t}=e;t&&this.handDragEvent()}ngOnDestroy(){this.destroy$.next(!0),this.destroy$.complete()}renderIndicator(e){this.ngZone.run(()=>{this.showIndicator=e!==2,!(this.nzTreeNode.key===this.nzTreeService.getSelectedNode()?.key||e===0&&this.isLeaf)&&(this.dragPos=e,this.cdr.markForCheck())})}static{this.\u0275fac=function(t){return new(t||i)(k(ce),k(st),k(dt),k(at),k(H))}}static{this.\u0275cmp=x({type:i,selectors:[["nz-tree-node","builtin",""]],hostVars:36,hostBindings:function(t,n){t&2&&(ne("display",n.displayStyle),N("ant-select-tree-treenode",n.nzSelectMode)("ant-select-tree-treenode-disabled",n.nzSelectMode&&n.isDisabled)("ant-select-tree-treenode-switcher-open",n.nzSelectMode&&n.isSwitcherOpen)("ant-select-tree-treenode-switcher-close",n.nzSelectMode&&n.isSwitcherClose)("ant-select-tree-treenode-checkbox-checked",n.nzSelectMode&&n.isChecked)("ant-select-tree-treenode-checkbox-indeterminate",n.nzSelectMode&&n.isHalfChecked)("ant-select-tree-treenode-selected",n.nzSelectMode&&n.isSelected)("ant-select-tree-treenode-loading",n.nzSelectMode&&n.isLoading)("ant-tree-treenode",!n.nzSelectMode)("ant-tree-treenode-disabled",!n.nzSelectMode&&n.isDisabled)("ant-tree-treenode-switcher-open",!n.nzSelectMode&&n.isSwitcherOpen)("ant-tree-treenode-switcher-close",!n.nzSelectMode&&n.isSwitcherClose)("ant-tree-treenode-checkbox-checked",!n.nzSelectMode&&n.isChecked)("ant-tree-treenode-checkbox-indeterminate",!n.nzSelectMode&&n.isHalfChecked)("ant-tree-treenode-selected",!n.nzSelectMode&&n.isSelected)("ant-tree-treenode-loading",!n.nzSelectMode&&n.isLoading)("dragging",n.draggingKey===n.nzTreeNode.key))},inputs:{icon:"icon",title:"title",isLoading:[2,"isLoading","isLoading",c],isSelected:[2,"isSelected","isSelected",c],isDisabled:[2,"isDisabled","isDisabled",c],isMatched:[2,"isMatched","isMatched",c],isExpanded:[2,"isExpanded","isExpanded",c],isLeaf:[2,"isLeaf","isLeaf",c],isChecked:[2,"isChecked","isChecked",c],isHalfChecked:[2,"isHalfChecked","isHalfChecked",c],isDisableCheckbox:[2,"isDisableCheckbox","isDisableCheckbox",c],isSelectable:[2,"isSelectable","isSelectable",c],canHide:[2,"canHide","canHide",c],isStart:"isStart",isEnd:"isEnd",nzTreeNode:"nzTreeNode",nzShowLine:[2,"nzShowLine","nzShowLine",c],nzShowExpand:[2,"nzShowExpand","nzShowExpand",c],nzCheckable:[2,"nzCheckable","nzCheckable",c],nzAsyncData:[2,"nzAsyncData","nzAsyncData",c],nzHideUnMatched:[2,"nzHideUnMatched","nzHideUnMatched",c],nzNoAnimation:[2,"nzNoAnimation","nzNoAnimation",c],nzSelectMode:[2,"nzSelectMode","nzSelectMode",c],nzShowIcon:[2,"nzShowIcon","nzShowIcon",c],nzExpandedIcon:"nzExpandedIcon",nzTreeTemplate:"nzTreeTemplate",nzBeforeDrop:"nzBeforeDrop",nzSearchValue:"nzSearchValue",nzDraggable:[2,"nzDraggable","nzDraggable",c]},outputs:{nzClick:"nzClick",nzDblClick:"nzDblClick",nzContextMenu:"nzContextMenu",nzCheckBoxChange:"nzCheckBoxChange",nzExpandChange:"nzExpandChange",nzOnDragStart:"nzOnDragStart",nzOnDragEnter:"nzOnDragEnter",nzOnDragOver:"nzOnDragOver",nzOnDragLeave:"nzOnDragLeave",nzOnDrop:"nzOnDrop",nzOnDragEnd:"nzOnDragEnd"},exportAs:["nzTreeBuiltinNode"],standalone:!0,features:[F,B,D],attrs:Yt,decls:4,vars:22,consts:[[3,"nzTreeLevel","nzSelectMode","nzIsStart","nzIsEnd"],[3,"nzShowExpand","nzShowLine","nzExpandedIcon","nzSelectMode","context","isLeaf","isExpanded","isLoading"],["builtin","",3,"nzSelectMode","isChecked","isHalfChecked","isDisabled","isDisableCheckbox"],[3,"dblclick","click","contextmenu","icon","title","isLoading","isSelected","isDisabled","isMatched","isExpanded","isLeaf","searchValue","treeTemplate","draggable","showIcon","selectMode","context","showIndicator","dragPosition"],[3,"click","nzShowExpand","nzShowLine","nzExpandedIcon","nzSelectMode","context","isLeaf","isExpanded","isLoading"],["builtin","",3,"click","nzSelectMode","isChecked","isHalfChecked","isDisabled","isDisableCheckbox"]],template:function(t,n){t&1&&(f(0,"nz-tree-indent",0),u(1,Hn,1,8,"nz-tree-node-switcher",1)(2,jn,1,5,"nz-tree-node-checkbox",2),C(3,"nz-tree-node-title",3),q("dblclick",function(s){return n.dblClick(s)})("click",function(s){return n.clickSelect(s)})("contextmenu",function(s){return n.contextMenu(s)}),y()),t&2&&(p("nzTreeLevel",n.nzTreeNode.level)("nzSelectMode",n.nzSelectMode)("nzIsStart",n.isStart)("nzIsEnd",n.isEnd),h(),S(n.nzShowExpand?1:-1),h(),S(n.nzCheckable?2:-1),h(),p("icon",n.icon)("title",n.title)("isLoading",n.isLoading)("isSelected",n.isSelected)("isDisabled",n.isDisabled)("isMatched",n.isMatched)("isExpanded",n.isExpanded)("isLeaf",n.isLeaf)("searchValue",n.nzSearchValue)("treeTemplate",n.nzTreeTemplate)("draggable",n.nzDraggable)("showIcon",n.nzShowIcon)("selectMode",n.nzSelectMode)("context",n.nzTreeNode)("showIndicator",n.showIndicator)("dragPosition",n.dragPos))},dependencies:[Jn,Jt,Xn,Xt],encapsulation:2,changeDetection:0})}}return i})(),tn=(()=>{class i extends ce{constructor(){super()}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275prov=O({token:i,factory:i.\u0275fac})}}return i})();function ei(){let i=he(qt,{skipSelf:!0,optional:!0}),o=he(tn);return i??o}var ti="tree",We=(()=>{class i extends Ae{writeValue(e){this.handleNzData(e)}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}renderTreeProperties(e){let t=!1,n=!1,{nzData:r,nzExpandedKeys:s,nzSelectedKeys:a,nzCheckedKeys:z,nzCheckStrictly:T,nzExpandAll:I,nzMultiple:v,nzSearchValue:w}=e;I&&(t=!0,n=this.nzExpandAll),v&&(this.nzTreeService.isMultiple=this.nzMultiple),T&&(this.nzTreeService.isCheckStrictly=this.nzCheckStrictly),r&&this.handleNzData(this.nzData),z&&this.handleCheckedKeys(this.nzCheckedKeys),T&&this.handleCheckedKeys(null),(s||I)&&(t=!0,this.handleExpandedKeys(n||this.nzExpandedKeys)),a&&this.handleSelectedKeys(this.nzSelectedKeys,this.nzMultiple),w&&(w.firstChange&&!this.nzSearchValue||(t=!1,this.handleSearchValue(w.currentValue,this.nzSearchFunc),this.nzSearchValueChange.emit(this.nzTreeService.formatEvent("search",null,null))));let V=this.getExpandedNodeList().map(gn=>gn.key),ye=t?n||this.nzExpandedKeys:V;this.handleFlattenNodes(this.nzTreeService.rootNodes,ye)}trackByFlattenNode(e,t){return t.key}handleNzData(e){if(Array.isArray(e)){let t=this.coerceTreeNodes(e);this.nzTreeService.initTree(t)}}handleFlattenNodes(e,t=[]){this.nzTreeService.flattenTreeData(e,t)}handleCheckedKeys(e){this.nzTreeService.conductCheck(e,this.nzCheckStrictly)}handleExpandedKeys(e=[]){this.nzTreeService.conductExpandedKeys(e)}handleSelectedKeys(e,t){this.nzTreeService.conductSelectedKeys(e,t)}handleSearchValue(e,t){let n=Ue(this.nzTreeService.rootNodes,!0).map(s=>s.data),r=s=>t?t(s.origin):!(!e||!s.title.toLowerCase().includes(e.toLowerCase()));n.forEach(s=>{s.isMatched=r(s),s.canHide=!s.isMatched,s.isMatched?this.nzTreeService.expandNodeAllParentBySearch(s):(s.setExpanded(!1),this.nzTreeService.setExpandedNodeList(s)),this.nzTreeService.setMatchedNodeList(s)})}eventTriggerChanged(e){let t=e.node;switch(e.eventName){case"expand":this.renderTree(),this.nzExpandChange.emit(e);break;case"click":this.nzClick.emit(e);break;case"dblclick":this.nzDblClick.emit(e);break;case"contextmenu":this.nzContextMenu.emit(e);break;case"check":this.nzTreeService.setCheckedNodeList(t),this.nzCheckStrictly||this.nzTreeService.conduct(t);let n=this.nzTreeService.formatEvent("check",t,e.event);this.nzCheckBoxChange.emit(n);let r=this.nzTreeService.getCheckedNodeKeys();this.nzCheckedKeysChange.emit(r);break;case"dragstart":t.isExpanded&&(t.setExpanded(!t.isExpanded),this.renderTree()),this.nzOnDragStart.emit(e);break;case"dragenter":let s=this.nzTreeService.getSelectedNode();s&&s.key!==t.key&&!t.isExpanded&&!t.isLeaf&&(t.setExpanded(!0),this.renderTree()),this.nzOnDragEnter.emit(e);break;case"dragover":this.nzOnDragOver.emit(e);break;case"dragleave":this.nzOnDragLeave.emit(e);break;case"dragend":this.nzOnDragEnd.emit(e);break;case"drop":this.renderTree(),this.nzOnDrop.emit(e);break}}renderTree(){this.handleFlattenNodes(this.nzTreeService.rootNodes,this.getExpandedNodeList().map(e=>e.key)),this.cdr.markForCheck()}constructor(e,t,n,r){super(e),this.nzConfigService=t,this.cdr=n,this.directionality=r,this._nzModuleName=ti,this.nzShowIcon=!1,this.nzHideUnMatched=!1,this.nzBlockNode=!1,this.nzExpandAll=!1,this.nzSelectMode=!1,this.nzCheckStrictly=!1,this.nzShowExpand=!0,this.nzShowLine=!1,this.nzCheckable=!1,this.nzAsyncData=!1,this.nzDraggable=!1,this.nzMultiple=!1,this.nzVirtualItemSize=28,this.nzVirtualMaxBufferPx=500,this.nzVirtualMinBufferPx=28,this.nzVirtualHeight=null,this.nzData=[],this.nzExpandedKeys=[],this.nzSelectedKeys=[],this.nzCheckedKeys=[],this.nzSearchValue="",this.nzFlattenNodes=[],this.beforeInit=!0,this.dir="ltr",this.nzExpandedKeysChange=new _,this.nzSelectedKeysChange=new _,this.nzCheckedKeysChange=new _,this.nzSearchValueChange=new _,this.nzClick=new _,this.nzDblClick=new _,this.nzContextMenu=new _,this.nzCheckBoxChange=new _,this.nzExpandChange=new _,this.nzOnDragStart=new _,this.nzOnDragEnter=new _,this.nzOnDragOver=new _,this.nzOnDragLeave=new _,this.nzOnDrop=new _,this.nzOnDragEnd=new _,this.HIDDEN_STYLE={width:0,height:0,display:"flex",overflow:"hidden",opacity:0,border:0,padding:0,margin:0},this.HIDDEN_NODE_STYLE={position:"absolute",pointerEvents:"none",visibility:"hidden",height:0,overflow:"hidden"},this.destroy$=new G,this.onChange=()=>null,this.onTouched=()=>null,this.noAnimation=he(Oe,{host:!0,optional:!0})}ngOnInit(){this.nzTreeService.flattenNodes$.pipe(L(this.destroy$)).subscribe(e=>{this.nzFlattenNodes=this.nzVirtualHeight&&this.nzHideUnMatched&&this.nzSearchValue?.length>0?e.filter(t=>!t.canHide):e,this.cdr.markForCheck()}),this.dir=this.directionality.value,this.directionality.change?.pipe(L(this.destroy$)).subscribe(e=>{this.dir=e,this.cdr.detectChanges()})}ngOnChanges(e){this.renderTreeProperties(e)}ngAfterViewInit(){this.beforeInit=!1}ngOnDestroy(){this.destroy$.next(!0),this.destroy$.complete()}static{this.\u0275fac=function(t){return new(t||i)(k(ce),k(ae),k(H),k(Ve))}}static{this.\u0275cmp=x({type:i,selectors:[["nz-tree"]],contentQueries:function(t,n,r){if(t&1&&zt(r,$n,7),t&2){let s;me(s=fe())&&(n.nzTreeTemplateChild=s.first)}},viewQuery:function(t,n){if(t&1&&Ee(Be,5,Be),t&2){let r;me(r=fe())&&(n.cdkVirtualScrollViewport=r.first)}},hostVars:20,hostBindings:function(t,n){t&2&&N("ant-select-tree",n.nzSelectMode)("ant-select-tree-show-line",n.nzSelectMode&&n.nzShowLine)("ant-select-tree-icon-hide",n.nzSelectMode&&!n.nzShowIcon)("ant-select-tree-block-node",n.nzSelectMode&&n.nzBlockNode)("ant-tree",!n.nzSelectMode)("ant-tree-rtl",n.dir==="rtl")("ant-tree-show-line",!n.nzSelectMode&&n.nzShowLine)("ant-tree-icon-hide",!n.nzSelectMode&&!n.nzShowIcon)("ant-tree-block-node",!n.nzSelectMode&&n.nzBlockNode)("draggable-tree",n.nzDraggable)},inputs:{nzShowIcon:[2,"nzShowIcon","nzShowIcon",c],nzHideUnMatched:[2,"nzHideUnMatched","nzHideUnMatched",c],nzBlockNode:[2,"nzBlockNode","nzBlockNode",c],nzExpandAll:[2,"nzExpandAll","nzExpandAll",c],nzSelectMode:[2,"nzSelectMode","nzSelectMode",c],nzCheckStrictly:[2,"nzCheckStrictly","nzCheckStrictly",c],nzShowExpand:[2,"nzShowExpand","nzShowExpand",c],nzShowLine:[2,"nzShowLine","nzShowLine",c],nzCheckable:[2,"nzCheckable","nzCheckable",c],nzAsyncData:[2,"nzAsyncData","nzAsyncData",c],nzDraggable:[2,"nzDraggable","nzDraggable",c],nzMultiple:[2,"nzMultiple","nzMultiple",c],nzExpandedIcon:"nzExpandedIcon",nzVirtualItemSize:"nzVirtualItemSize",nzVirtualMaxBufferPx:"nzVirtualMaxBufferPx",nzVirtualMinBufferPx:"nzVirtualMinBufferPx",nzVirtualHeight:"nzVirtualHeight",nzTreeTemplate:"nzTreeTemplate",nzBeforeDrop:"nzBeforeDrop",nzData:"nzData",nzExpandedKeys:"nzExpandedKeys",nzSelectedKeys:"nzSelectedKeys",nzCheckedKeys:"nzCheckedKeys",nzSearchValue:"nzSearchValue",nzSearchFunc:"nzSearchFunc"},outputs:{nzExpandedKeysChange:"nzExpandedKeysChange",nzSelectedKeysChange:"nzSelectedKeysChange",nzCheckedKeysChange:"nzCheckedKeysChange",nzSearchValueChange:"nzSearchValueChange",nzClick:"nzClick",nzDblClick:"nzDblClick",nzContextMenu:"nzContextMenu",nzCheckBoxChange:"nzCheckBoxChange",nzExpandChange:"nzExpandChange",nzOnDragStart:"nzOnDragStart",nzOnDragEnter:"nzOnDragEnter",nzOnDragOver:"nzOnDragOver",nzOnDragLeave:"nzOnDragLeave",nzOnDrop:"nzOnDrop",nzOnDragEnd:"nzOnDragEnd"},exportAs:["nzTree"],standalone:!0,features:[Ct([tn,{provide:ce,useFactory:ei},{provide:xt,useExisting:nt(()=>i),multi:!0}]),F,pt,B,D],decls:10,vars:5,consts:[["nodeTemplate",""],[3,"ngStyle"],[1,"ant-tree-treenode",3,"ngStyle"],[1,"ant-tree-indent"],[1,"ant-tree-indent-unit"],[1,"ant-tree-list",2,"position","relative"],[3,"ant-select-tree-list-holder-inner","ant-tree-list-holder-inner","itemSize","minBufferPx","maxBufferPx","height"],[3,"ant-select-tree-list-holder-inner","ant-tree-list-holder-inner","nzNoAnimation"],[3,"itemSize","minBufferPx","maxBufferPx"],[4,"cdkVirtualFor","cdkVirtualForOf","cdkVirtualForTrackBy"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"nzNoAnimation"],["builtin","",3,"nzExpandChange","nzClick","nzDblClick","nzContextMenu","nzCheckBoxChange","nzOnDragStart","nzOnDragEnter","nzOnDragOver","nzOnDragLeave","nzOnDragEnd","nzOnDrop","icon","title","isLoading","isSelected","isDisabled","isMatched","isExpanded","isLeaf","isStart","isEnd","isChecked","isHalfChecked","isDisableCheckbox","isSelectable","canHide","nzTreeNode","nzSelectMode","nzShowLine","nzExpandedIcon","nzDraggable","nzCheckable","nzShowExpand","nzAsyncData","nzSearchValue","nzHideUnMatched","nzBeforeDrop","nzShowIcon","nzTreeTemplate"]],template:function(t,n){t&1&&(C(0,"div"),f(1,"input",1),y(),C(2,"div",2)(3,"div",3),f(4,"div",4),y()(),C(5,"div",5),u(6,Un,2,11,"cdk-virtual-scroll-viewport",6)(7,Qn,3,7,"div",7),y(),u(8,Yn,1,28,"ng-template",null,0,Y)),t&2&&(h(),p("ngStyle",n.HIDDEN_STYLE),h(),p("ngStyle",n.HIDDEN_NODE_STYLE),h(3),N("ant-select-tree-list",n.nzSelectMode),h(),S(n.nzVirtualHeight?6:7))},dependencies:[Le,Be,Tt,vt,ge,Oe,en],encapsulation:2,data:{animation:[bt]},changeDetection:0})}}return te([le()],i.prototype,"nzShowIcon",void 0),te([le()],i.prototype,"nzHideUnMatched",void 0),te([le()],i.prototype,"nzBlockNode",void 0),i})(),nn=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275mod=R({type:i})}static{this.\u0275inj=A({imports:[We,en,Jt,Xt]})}}return i})();function ii(i,o){if(i&1&&(j(0),K(1),$()),i&2){let e=l(2);h(),Me(e.nzText)}}function ri(i,o){if(i&1&&(C(0,"span",0),u(1,ii,2,1,"ng-container",1),y()),i&2){let e=l();h(),p("nzStringTemplateOutlet",e.nzText)}}var oi=(()=>{class i{constructor(){this.nzType="horizontal",this.nzOrientation="center",this.nzDashed=!1,this.nzPlain=!1}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275cmp=x({type:i,selectors:[["nz-divider"]],hostAttrs:[1,"ant-divider"],hostVars:16,hostBindings:function(t,n){t&2&&N("ant-divider-horizontal",n.nzType==="horizontal")("ant-divider-vertical",n.nzType==="vertical")("ant-divider-with-text",n.nzText)("ant-divider-plain",n.nzPlain)("ant-divider-with-text-left",n.nzText&&n.nzOrientation==="left")("ant-divider-with-text-right",n.nzText&&n.nzOrientation==="right")("ant-divider-with-text-center",n.nzText&&n.nzOrientation==="center")("ant-divider-dashed",n.nzDashed)},inputs:{nzText:"nzText",nzType:"nzType",nzOrientation:"nzOrientation",nzDashed:[2,"nzDashed","nzDashed",c],nzPlain:[2,"nzPlain","nzPlain",c]},exportAs:["nzDivider"],standalone:!0,features:[F,D],decls:1,vars:1,consts:[[1,"ant-divider-inner-text"],[4,"nzStringTemplateOutlet"]],template:function(t,n){t&1&&u(0,ri,2,1,"span",0),t&2&&S(n.nzText?0:-1)},dependencies:[se,oe],encapsulation:2,changeDetection:0})}}return i})(),Ar=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275mod=R({type:i})}static{this.\u0275inj=A({imports:[oi]})}}return i})();var J=(()=>{class i{static{this.Market="market"}static{this.Blueprint="blueprint"}}return i})(),X=(()=>{class i{static{this.MarketGroup="marketGroup"}static{this.Type="type"}}return i})();function rn(i){return new m(o=>{setTimeout(()=>g(this,null,function*(){if(i.isInit){o.next(),o.complete();return}for(;!i.isInit;)yield d(Fe.wait(10));o.next(),o.complete()}))})}var sn=(()=>{class i{constructor(e,t){this.indexedDBManager=e,this.httpClient=t,this.marketGroupDict={},this.isInit=!1,this.init().subscribe(()=>{console.log("MarketGroupRepositoryService.init DONE")})}waitUntilInit(){return rn(this)}init(){return new m(e=>{setTimeout(()=>g(this,null,function*(){if(this.isInit){e.next(),e.complete();return}this.marketGroupDict=yield d(this.httpClient.get("/assets/marketGroups.gen.json")),this.isInit=!0,e.next(),e.complete()}))})}getMarketGroups(){return new m(e=>{setTimeout(()=>g(this,null,function*(){let t=yield d(this.indexedDBManager.getMarketGroupStore()),n=[];t.getAll().onsuccess=r=>{n=r.target.result,e.next(n),e.complete()}}))})}getMarketGroupDict(){return new m(e=>{setTimeout(()=>g(this,null,function*(){yield d(this.waitUntilInit()),e.next(this.marketGroupDict),e.complete()}))})}getMarketGroupDictByIds(e){return new m(t=>{setTimeout(()=>g(this,null,function*(){let n=yield d(this.getMarketGroupDict()),r={};for(let s=0;s<e.length;s++){let a=e[s];n[a]&&(r[a]=n[a])}t.next(r),t.complete()}))})}getMarketGroupDictByChildren(e){return new m(t=>{setTimeout(()=>g(this,null,function*(){let n=new Set;for(let r in e){let s=e[r];s.parentGroupID&&n.add(s.parentGroupID)}if(n.size>0){let r=yield d(this.getMarketGroupDictByIds([...n])),s=yield d(this.getMarketGroupDictByChildren(r));for(let a in s)e[a]=s[a]}t.next(e),t.complete()}))})}static{this.\u0275fac=function(t){return new(t||i)(b(Pe),b(re))}}static{this.\u0275prov=O({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var ee=(()=>{class i extends m{constructor(){super(),this.value=null,this.subscriberDict={}}static{this.id=0}subscribe(e,t,n){return new m(r=>{let s=this.nextId();return this.value!==null&&r.next(this.value),this.subscriberDict[s]=r,{unsubscribe:()=>{delete this.subscriberDict[s]}}}).subscribe(e,t,n)}setValue(e){this.value=e,setTimeout(()=>{for(let t in this.subscriberDict)this.subscriberDict[t].next(e)})}nextId(){return i.id++}}return i})();var an=(()=>{class i{constructor(){this.marketGroupOptions=new ee,this.bluePrintMarketGroupOptions=new ee}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275prov=O({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var ln=(()=>{class i{constructor(e){this.indexedDBManager=e}static{this.KEY_MARKET_BLUEPRINT_TREE_NODES="KEY_MARKET_BLUEPRINT_TREE_NODES"}static{this.KEY_MARKET_TREE_NODES="KEY_MARKET_TREE_NODES"}getMarketTreeNodes(){return new m(e=>{setTimeout(()=>g(this,null,function*(){let n=(yield d(this.indexedDBManager.getKeyValueStore())).get(i.KEY_MARKET_TREE_NODES),r=yield d(this.indexedDBManager.dbRequestGetOrDefault(n,[]));e.next(r),e.complete()}))})}setMarketTreeNodes(e){return new m(t=>{setTimeout(()=>g(this,null,function*(){let r=(yield d(this.indexedDBManager.getKeyValueStore())).put(this.makeEntity(i.KEY_MARKET_TREE_NODES,e));yield d(this.indexedDBManager.dbRequestWait(r)),t.next(),t.complete}))})}getMarketBlueprintTreeNodes(){return new m(e=>{setTimeout(()=>g(this,null,function*(){let n=(yield d(this.indexedDBManager.getKeyValueStore())).get(i.KEY_MARKET_BLUEPRINT_TREE_NODES),r=yield d(this.indexedDBManager.dbRequestGetOrDefault(n,[]));e.next(r),e.complete()}))})}setMarketBlueprintTreeNodes(e){return new m(t=>{setTimeout(()=>g(this,null,function*(){let r=(yield d(this.indexedDBManager.getKeyValueStore())).put(this.makeEntity(i.KEY_MARKET_BLUEPRINT_TREE_NODES,e));yield d(this.indexedDBManager.dbRequestWait(r)),t.next(),t.complete}))})}makeEntity(e,t){return{key:e,value:t}}static{this.\u0275fac=function(t){return new(t||i)(b(Pe))}}static{this.\u0275prov=O({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var cn=(()=>{class i{constructor(e){this.httpClient=e,this.typeDictOv=new ee,this.init().subscribe(()=>{console.log("TypeRepositoryService.init DONE")})}init(){return new m(e=>{setTimeout(()=>g(this,null,function*(){let t=yield d(this.httpClient.get("/assets/types.gen.json"));this.typeDictOv.setValue(t),e.next(),e.complete()}))})}getTypeDict(){return this.typeDictOv}getTypeDictWhereHasMarketGroupId(){return new m(e=>{setTimeout(()=>g(this,null,function*(){let t=yield d(this.getTypeDict()),n={};for(let r in t){let s=t[r];s.marketGroupID&&(n[r]=s)}e.next(n),e.complete()}))})}getTypeDictByMarketGroupIds(e){return new m(t=>{setTimeout(()=>g(this,null,function*(){let n=new Set(e),r=yield d(this.getTypeDict()),s={};for(let a in r){let z=r[a];n.has(z.typeID)&&(s[a]=z)}t.next(s),t.complete()}))})}getTypeDictWithMarketGroupID(e=null){return new m(t=>{setTimeout(()=>g(this,null,function*(){let n=yield d(this.getTypeDict()),r={};if(e!=null)for(let s in n){let a=n[s];a.marketGroupID==e&&(r[s]=a)}else for(let s in n){let a=n[s];a.marketGroupID&&(r[s]=a)}t.next(n),t.complete()}))})}getTypeDictByTypeIds(e){return new m(t=>{setTimeout(()=>g(this,null,function*(){let n=yield d(this.getTypeDict()),r={};for(let s in e){let a=e[s];r[a]=n[a]}t.next(r),t.complete()}))})}getType(e){return new m(t=>{setTimeout(()=>g(this,null,function*(){let n=yield d(this.getTypeDict());t.next(n[e]??null),t.complete()}))})}static{this.\u0275fac=function(t){return new(t||i)(b(re))}}static{this.\u0275prov=O({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var dn=(()=>{class i{constructor(e){this.httpClient=e,this.blueprintDictOv=new ee,this.init().subscribe(()=>{console.log("BlueprintRepositoryService.init DONE")})}init(){return new m(e=>{setTimeout(()=>g(this,null,function*(){let t=yield d(this.httpClient.get("/assets/blueprints.gen.json"));this.blueprintDictOv.setValue(t),e.next(),e.complete()}))})}getBlueprintDict(){return this.blueprintDictOv}getManufacturingProductTypeIds(){return new m(e=>{setTimeout(()=>g(this,null,function*(){let t=yield d(this.getBlueprintDict()),n=new Set;for(let r in t){let a=t[r].activities.manufacturing?.products??[];for(let z=0;z<a.length;z++){let T=a[z];n.add(T.typeID)}}e.next([...n]),e.complete()}))})}getBlueprint(e){return new m(t=>{setTimeout(()=>g(this,null,function*(){let n=yield d(this.getBlueprintDict());t.next(n[e]??null),t.complete()}))})}static{this.\u0275fac=function(t){return new(t||i)(b(re))}}static{this.\u0275prov=O({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var hn=(()=>{class i{constructor(e,t,n,r,s,a,z,T){this.orderRepository=e,this.loadingViewManager=t,this.marketGroupRepository=n,this.marketMessage=r,this.keyValueRepository=s,this.typeRepository=a,this.blueprintRepository=z,this.eveEsiApi=T,this.constructLoadingItem=this.loadingViewManager.register("market","\u5E02\u573A\u6570\u636E",1),this.init().subscribe(()=>{this.loadingViewManager.finished(this.constructLoadingItem)})}getMarketNodeType(e){return e=this.parseNode(e),e.key.startsWith("mg_")?X.MarketGroup:X.Type}getMarketNodeId(e){e=this.parseNode(e);let t=this.getMarketNodeType(e);return t==X.MarketGroup?Number(e.key.replace("mg_","")):t==X.Type?Number(e.key.replace("t_","")):-1}isBlueprintNode(e){return e=this.parseNode(e),e.isBlueprint??!1}parseNode(e){return e instanceof Z?e.origin:e}makeMarketGroupTreeNode(e){return{title:e.name,key:`mg_${e.marketGroupID}`,iconId:e.iconID,children:[]}}makeTypeTreeNode(e){return new m(t=>{setTimeout(()=>g(this,null,function*(){let n={title:e.name,key:`t_${e.typeID}`,isLeaf:!0,isBlueprint:!1,children:[]};(yield d(this.blueprintRepository.getBlueprint(e.typeID)))!=null&&(n.isBlueprint=!0),t.next(n),t.complete()}))})}getMarketTreeNodeOptions(e){let t=this.loadingViewManager.register("MarketService.getMarketTreeNodeOptions","\u5E02\u573A\u7269\u54C1\u7ED3\u6784 \u9996\u6B21\u52A0\u8F7D\u65F6\u95F4\u6BD4\u8F83\u4E45\uFF0C\u8BF7\u8010\u5FC3\u7B49\u5F85",1);return new m(n=>{setTimeout(()=>g(this,null,function*(){let r=[];if(e==J.Market){if(r=yield d(this.keyValueRepository.getMarketTreeNodes()),r.length==0){let s=yield d(this.typeRepository.getTypeDictWhereHasMarketGroupId()),a=Object.keys(s).map(z=>Number(z));r=yield d(this.getMarketTreeNodeOptionsByTypeIds(a)),yield d(this.keyValueRepository.setMarketTreeNodes(r))}}else if(e==J.Blueprint){if(r=yield d(this.keyValueRepository.getMarketBlueprintTreeNodes()),r.length==0){let s=yield d(this.blueprintRepository.getManufacturingProductTypeIds());r=yield d(this.getMarketTreeNodeOptionsByTypeIds(s)),yield d(this.keyValueRepository.setMarketBlueprintTreeNodes(r))}}else{let s=`MarketService.getMarketTreeNodeOptions unknown marketTreeMode: ${e}`;console.error(s),n.error(s)}n.next(r),n.complete(),this.loadingViewManager.finished(t)}))})}getMarketTreeNodeOptionsByTypeIds(e){return new m(t=>{setTimeout(()=>g(this,null,function*(){let n=yield d(this.typeRepository.getTypeDictByTypeIds(e)),r=new Set;for(let v in n){let w=n[v];w&&w.marketGroupID&&r.add(w.marketGroupID)}let s=yield d(this.marketGroupRepository.getMarketGroupDictByIds([...r]));s=yield d(this.marketGroupRepository.getMarketGroupDictByChildren(s));let a={};for(let v in s){let w=s[v],V=w.parentGroupID??0;a[V]||(a[V]=[]),a[V].push(w)}let z={};for(let v in n){let w=n[v],V=w?.marketGroupID??void 0;V&&(z[V]||(z[V]=[]),z[V].push(w))}let T=[],I=a[0];for(let v in I){let w=I[v],V=this.makeMarketGroupTreeNode(w);V.children=yield d(this.getMarketTreeNodeOptionsChildren(w,a,z)),T.push(V)}t.next(T),t.complete()}))})}getMarketTreeNodeOptionsChildren(e,t,n){return new m(r=>{setTimeout(()=>g(this,null,function*(){let s=t[e.marketGroupID]??[],a=[];for(let T in s){let I=s[T],v=I.name;v==""&&(v=I.marketGroupID+"");let w=this.makeMarketGroupTreeNode(I);w.children=yield d(this.getMarketTreeNodeOptionsChildren(I,t,n)),a.push(w)}let z=n[e.marketGroupID]??[];for(let T in z){let I=z[T],v=yield d(this.makeTypeTreeNode(I));a.push(v)}r.next(a),r.complete()}))})}init(){return new m(e=>{setTimeout(()=>g(this,null,function*(){let t=[this.initMarketGroupOptions().pipe(_e(()=>{this.constructLoadingItem.doneStep++})),this.getMarketTreeNodeOptions(J.Market).pipe(_e(()=>{this.constructLoadingItem.doneStep++})),this.getMarketTreeNodeOptions(J.Blueprint).pipe(_e(()=>{this.constructLoadingItem.doneStep++}))];this.constructLoadingItem.totalStep+=t.length,yield d(Ze(t)),e.next(),e.complete()}))})}initMarketGroupOptions(){return new m(e=>{setTimeout(()=>g(this,null,function*(){e.next(),e.complete()}))})}autoReloadOrdersByJita(e=!1){return this.autoReloadOrdersByRegionId(10000002,e)}autoReloadOrdersByRegionId(e,t=!1){return new m(n=>{setTimeout(()=>g(this,null,function*(){let r=!1;if(t)r=!0;else{let s=yield d(this.orderRepository.getOrdersByRegionId(e));(s==null||Fe.timestampMS()-s.mtime>1e3*60*60)&&(r=!0)}if(!r){n.next(),n.complete();return}yield d(this.orderRepository.reloadOrdersByRegionId(e))}))})}getHistory(e,t){return new m(n=>{setTimeout(()=>g(this,null,function*(){let r=yield d(this.eveEsiApi.marketsRegionHistory(e,t)),s={date:[],average:[],average_20d:[],highest:[],lowest:[],order_count:[],volume:[]},a={averages:[],volumes:[]};for(let z in r){let T=r[z];s.date.push(T.date),s.average.push(T.average),s.highest.push(T.highest),s.lowest.push(T.lowest),s.order_count.push(T.order_count),s.volume.push(T.volume),a.averages.push(T.average),a.volumes.push(T.volume),a.averages.length>20&&(a.averages.shift(),a.volumes.shift());let I=0,v=0;for(let w in a.averages){let V=a.averages[w],ye=a.volumes[w];I+=V*ye,v+=ye}s.average_20d.push(Number(I/v))}n.next(s),n.complete()}))})}getHistoryByNode(e){e=this.parseNode(e);let t=this.getMarketNodeId(e);return this.getHistory(10000002,t)}getNodeImageSrc(e,t=32){if(e=this.parseNode(e),this.getMarketNodeType(e)==X.Type){let n=this.getMarketNodeId(e);return this.isBlueprintNode(e)?`https://images.evetech.net/types/${n}/bp?size=${t}`:`https://images.evetech.net/types/${n}/icon?size=${t}`}else if(this.getMarketNodeType(e)==X.MarketGroup)return`https://cn.c3q.cc:20080/eve/market/img/market_groups/${e.iconId??0}.png`;return""}getOrderByNode(e){let t=this.getMarketNodeId(e);return new m(n=>{setTimeout(()=>g(this,null,function*(){let r=yield d(this.orderRepository.getOrdersByTypeId(10000002,t));n.next(r),n.complete()}))})}static{this.\u0275fac=function(t){return new(t||i)(b($t),b(Ht),b(sn),b(an),b(ln),b(cn),b(dn),b(jt))}}static{this.\u0275prov=O({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var ui=["nzType","avatar"],mi=["nzType","input"];var fi=["*"];function gi(i,o){if(i&1&&(C(0,"div",1),f(1,"nz-skeleton-element",4),y()),i&2){let e=l(2);h(),p("nzSize",e.avatar.size||"default")("nzShape",e.avatar.shape||"circle")}}function zi(i,o){if(i&1&&f(0,"h3",5),i&2){let e=l(2);ne("width",e.toCSSUnit(e.title.width))}}function Ci(i,o){if(i&1&&f(0,"li"),i&2){let e=o.$index,t=l(3);ne("width",t.toCSSUnit(t.widthList[e]))}}function yi(i,o){if(i&1&&(C(0,"ul",3),pe(1,Ci,1,2,"li",6,gt),y()),i&2){let e=l(2);h(),ue(e.rowsList)}}function Si(i,o){if(i&1&&(u(0,gi,2,2,"div",1),C(1,"div",0),u(2,zi,1,2,"h3",2)(3,yi,3,0,"ul",3),y()),i&2){let e=l();S(e.nzAvatar?0:-1),h(2),S(e.nzTitle?2:-1),h(),S(e.nzParagraph?3:-1)}}function _i(i,o){i&1&&we(0)}var ki=(()=>{class i{constructor(){this.nzActive=!1,this.nzBlock=!1}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275dir=it({type:i,selectors:[["nz-skeleton-element"]],hostAttrs:[1,"ant-skeleton","ant-skeleton-element"],hostVars:4,hostBindings:function(t,n){t&2&&N("ant-skeleton-active",n.nzActive)("ant-skeleton-block",n.nzBlock)},inputs:{nzActive:[2,"nzActive","nzActive",c],nzType:"nzType",nzBlock:[2,"nzBlock","nzBlock",c]},standalone:!0,features:[F]})}}return i})();var Ni=(()=>{class i{constructor(){this.nzShape="circle",this.nzSize="default",this.styleMap={}}ngOnChanges(e){if(e.nzSize&&typeof this.nzSize=="number"){let t=`${this.nzSize}px`;this.styleMap={width:t,height:t,"line-height":t}}else this.styleMap={}}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275cmp=x({type:i,selectors:[["nz-skeleton-element","nzType","avatar"]],inputs:{nzShape:"nzShape",nzSize:"nzSize"},standalone:!0,features:[B,D],attrs:ui,decls:1,vars:9,consts:[[1,"ant-skeleton-avatar",3,"ngStyle"]],template:function(t,n){t&1&&f(0,"span",0),t&2&&(N("ant-skeleton-avatar-square",n.nzShape==="square")("ant-skeleton-avatar-circle",n.nzShape==="circle")("ant-skeleton-avatar-lg",n.nzSize==="large")("ant-skeleton-avatar-sm",n.nzSize==="small"),p("ngStyle",n.styleMap))},dependencies:[Le],encapsulation:2,changeDetection:0})}}return i})(),vo=(()=>{class i{constructor(){this.nzSize="default"}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275cmp=x({type:i,selectors:[["nz-skeleton-element","nzType","input"]],inputs:{nzSize:"nzSize"},standalone:!0,features:[D],attrs:mi,decls:1,vars:4,consts:[[1,"ant-skeleton-input"]],template:function(t,n){t&1&&f(0,"span",0),t&2&&N("ant-skeleton-input-lg",n.nzSize==="large")("ant-skeleton-input-sm",n.nzSize==="small")},encapsulation:2,changeDetection:0})}}return i})();var pn=(()=>{class i{constructor(e){this.cdr=e,this.nzActive=!1,this.nzLoading=!0,this.nzRound=!1,this.nzTitle=!0,this.nzAvatar=!1,this.nzParagraph=!0,this.rowsList=[],this.widthList=[]}toCSSUnit(e=""){return Nt(e)}getTitleProps(){let e=!!this.nzAvatar,t=!!this.nzParagraph,n="";return!e&&t?n="38%":e&&t&&(n="50%"),de({width:n},this.getProps(this.nzTitle))}getAvatarProps(){let e=this.nzTitle&&!this.nzParagraph?"square":"circle";return de({shape:e,size:"large"},this.getProps(this.nzAvatar))}getParagraphProps(){let e=!!this.nzAvatar,t=!!this.nzTitle,n={};return(!e||!t)&&(n.width="61%"),!e&&t?n.rows=3:n.rows=2,de(de({},n),this.getProps(this.nzParagraph))}getProps(e){return e&&typeof e=="object"?e:{}}getWidthList(){let{width:e,rows:t}=this.paragraph,n=[];return e&&Array.isArray(e)?n=e:e&&!Array.isArray(e)&&(n=[],n[t-1]=e),n}updateProps(){this.title=this.getTitleProps(),this.avatar=this.getAvatarProps(),this.paragraph=this.getParagraphProps(),this.rowsList=[...Array(this.paragraph.rows)],this.widthList=this.getWidthList(),this.cdr.markForCheck()}ngOnInit(){this.updateProps()}ngOnChanges(e){(e.nzTitle||e.nzAvatar||e.nzParagraph)&&this.updateProps()}static{this.\u0275fac=function(t){return new(t||i)(k(H))}}static{this.\u0275cmp=x({type:i,selectors:[["nz-skeleton"]],hostAttrs:[1,"ant-skeleton"],hostVars:6,hostBindings:function(t,n){t&2&&N("ant-skeleton-with-avatar",!!n.nzAvatar)("ant-skeleton-active",n.nzActive)("ant-skeleton-round",!!n.nzRound)},inputs:{nzActive:"nzActive",nzLoading:"nzLoading",nzRound:"nzRound",nzTitle:"nzTitle",nzAvatar:"nzAvatar",nzParagraph:"nzParagraph"},exportAs:["nzSkeleton"],standalone:!0,features:[B,D],ngContentSelectors:fi,decls:2,vars:1,consts:[[1,"ant-skeleton-content"],[1,"ant-skeleton-header"],[1,"ant-skeleton-title",3,"width"],[1,"ant-skeleton-paragraph"],["nzType","avatar",3,"nzSize","nzShape"],[1,"ant-skeleton-title"],[3,"width"]],template:function(t,n){t&1&&(De(),u(0,Si,4,3,"div",0)(1,_i,1,0)),t&2&&S(n.nzLoading?0:1)},dependencies:[ki,Ni],encapsulation:2,changeDetection:0})}}return i})(),un=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275mod=R({type:i})}static{this.\u0275inj=A({})}}return i})();var vi=["mainElement"];function xi(i,o){if(i&1){let e=Q();C(0,"span",8),q("click",function(){E(e);let n=l(2);return M(n.searchValue="")}),y()}}function Di(i,o){if(i&1&&u(0,xi,1,0,"span",7),i&2){let e=l();S(e.searchValue?0:-1)}}function wi(i,o){i&1&&f(0,"nz-skeleton",9),i&2&&p("nzActive",!0)}function Ei(i,o){if(i&1&&(C(0,"div",10),f(1,"img",11),K(2),y()),i&2){let e=o.$implicit,t=l();h(),p("src",t.imgsrc(e),xe),h(),ie(" ",e.title," ")}}var $o=(()=>{class i{constructor(e){this.marketService=e,this.onNodeClick=new _,this._mode=J.Market,this.searchValue="",this.treeNodeOptions=[],this.selectedKeys=[],this.checkedKeys=[],this.searchFunc=t=>{try{return this.searchValue==""?!1:t.title.includes(this.searchValue)}catch{return!1}},this.virtualHeight="400px",this.loading=!1}set mode(e){this._mode=e,this.reloadTreeNodeByMode().subscribe()}ngAfterViewInit(){this.reloadTreeNodeByMode().subscribe(),new ResizeObserver(t=>{for(let n of t){let r=n.contentRect.height;this.virtualHeight=r-40+"px"}}).observe(this.mainElementRef.nativeElement)}_onNodeClick(e){if(this.selectedKeys=[],e.node===void 0||e.node===null){console.error("MarketTreeComponent._onNodeClick event.node is undefined or null",e);return}this.onNodeClick.emit(e.node)}imgsrc(e){return this.marketService.getNodeImageSrc(e,32)}reloadTreeNodeByMode(){return new m(e=>{setTimeout(()=>g(this,null,function*(){this.loading=!0,this.treeNodeOptions=[];let t=yield d(this.marketService.getMarketTreeNodeOptions(this._mode));this.treeNodeOptions=t,this.loading=!1,e.next(),e.complete()}))})}static{this.\u0275fac=function(t){return new(t||i)(k(hn))}}static{this.\u0275cmp=x({type:i,selectors:[["app-market-tree"]],viewQuery:function(t,n){if(t&1&&Ee(vi,5),t&2){let r;me(r=fe())&&(n.mainElementRef=r.first)}},inputs:{mode:"mode"},outputs:{onNodeClick:"onNodeClick"},standalone:!0,features:[D],decls:10,vars:11,consts:[["mainElement",""],["searchClearIcon",""],["nodeTreeTemplate",""],["nzSearch","",3,"nzSuffix"],["nz-input","","placeholder","\u641C\u7D22","type","text",3,"ngModelChange","ngModel","disabled"],[3,"nzActive",4,"ngIf"],["nzBlockNode","","nzHideUnMatched","",3,"nzSelectedKeysChange","nzClick","nzData","nzSelectedKeys","nzSearchValue","nzSearchFunc","nzVirtualHeight","nzVirtualMinBufferPx","nzTreeTemplate"],["nz-icon","","nzTheme","fill","nzType","close-circle",1,"ant-input-clear-icon"],["nz-icon","","nzTheme","fill","nzType","close-circle",1,"ant-input-clear-icon",3,"click"],[3,"nzActive"],[1,"tree-node"],[1,"type-img",3,"src"]],template:function(t,n){if(t&1){let r=Q();C(0,"main",null,0)(2,"nz-input-group",3)(3,"input",4),$e("ngModelChange",function(a){return E(r),je(n.searchValue,a)||(n.searchValue=a),M(a)}),y()(),u(4,Di,1,1,"ng-template",null,1,Y)(6,wi,1,1,"nz-skeleton",5),C(7,"nz-tree",6),$e("nzSelectedKeysChange",function(a){return E(r),je(n.selectedKeys,a)||(n.selectedKeys=a),M(a)}),q("nzClick",function(a){return E(r),M(n._onNodeClick(a))}),y(),u(8,Ei,3,2,"ng-template",null,2,Y),y()}if(t&2){let r=W(5),s=W(9);h(2),p("nzSuffix",r),h(),He("ngModel",n.searchValue),p("disabled",n.loading),h(3),p("ngIf",n.loading),h(),p("nzData",n.treeNodeOptions),He("nzSelectedKeys",n.selectedKeys),p("nzSearchValue",n.searchValue)("nzSearchFunc",n.searchFunc)("nzVirtualHeight",n.virtualHeight)("nzVirtualMinBufferPx",500)("nzTreeTemplate",s)}},dependencies:[kt,_t,Mt,Dt,wt,Et,nn,We,Ce,ze,At,Bt,Pt,Ft,un,pn],styles:[".tree-node[_ngcontent-%COMP%]   .type-img[_ngcontent-%COMP%]{width:24px;height:24px}main[_ngcontent-%COMP%]{height:100%}"]})}}return i})();function Mi(i,o){if(i&1&&(j(0),f(1,"img",4),$()),i&2){let e=l(2);h(),p("src",e.nzNotFoundImage,xe)("alt",e.isContentString?e.nzNotFoundContent:"empty")}}function bi(i,o){if(i&1&&u(0,Mi,2,2,"ng-container",3),i&2){let e=l();p("nzStringTemplateOutlet",e.nzNotFoundImage)}}function Ii(i,o){i&1&&f(0,"nz-empty-simple")}function Li(i,o){i&1&&f(0,"nz-empty-default")}function Oi(i,o){if(i&1&&u(0,Ii,1,0,"nz-empty-simple")(1,Li,1,0,"nz-empty-default"),i&2){let e=l();S(e.nzNotFoundImage==="simple"?0:1)}}function Vi(i,o){if(i&1&&(j(0),K(1),$()),i&2){let e=l(2);h(),ie(" ",e.isContentString?e.nzNotFoundContent:e.locale.description," ")}}function Bi(i,o){if(i&1&&(C(0,"p",1),u(1,Vi,2,1,"ng-container",3),y()),i&2){let e=l();h(),p("nzStringTemplateOutlet",e.nzNotFoundContent)}}function Fi(i,o){if(i&1&&(j(0),K(1),$()),i&2){let e=l(2);h(),ie(" ",e.nzNotFoundFooter," ")}}function Pi(i,o){if(i&1&&(C(0,"div",2),u(1,Fi,2,1,"ng-container",3),y()),i&2){let e=l();h(),p("nzStringTemplateOutlet",e.nzNotFoundFooter)}}function Ai(i,o){if(i&1&&K(0),i&2){let e=l(2);ie(" ",e.content," ")}}function Ri(i,o){}function Hi(i,o){if(i&1&&u(0,Ri,0,0,"ng-template",0),i&2){let e=l(2);p("cdkPortalOutlet",e.contentPortal)}}function ji(i,o){if(i&1&&u(0,Ai,1,1)(1,Hi,1,1,null,0),i&2){let e=l();S(e.contentType==="string"?0:1)}}function $i(i,o){i&1&&f(0,"nz-empty",1)}function Ki(i,o){i&1&&f(0,"nz-empty",2)}function Gi(i,o){i&1&&f(0,"nz-empty")}function Ui(i,o){if(i&1&&u(0,$i,1,0,"nz-empty",1)(1,Ki,1,0,"nz-empty",2)(2,Gi,1,0,"nz-empty"),i&2){let e,t=l(2);S((e=t.size)==="normal"?0:e==="small"?1:2)}}function qi(i,o){if(i&1&&u(0,Ui,3,1),i&2){let e=l();S(e.specificContent!==null?0:-1)}}var Wi=new Ne("nz-empty-component-name"),Qi=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275cmp=x({type:i,selectors:[["nz-empty-default"]],exportAs:["nzEmptyDefault"],standalone:!0,features:[D],decls:12,vars:0,consts:[["width","184","height","152","viewBox","0 0 184 152","xmlns","http://www.w3.org/2000/svg",1,"ant-empty-img-default"],["fill","none","fill-rule","evenodd"],["transform","translate(24 31.67)"],["cx","67.797","cy","106.89","rx","67.797","ry","12.668",1,"ant-empty-img-default-ellipse"],["d","M122.034 69.674L98.109 40.229c-1.148-1.386-2.826-2.225-4.593-2.225h-51.44c-1.766 0-3.444.839-4.592 2.225L13.56 69.674v15.383h108.475V69.674z",1,"ant-empty-img-default-path-1"],["d","M101.537 86.214L80.63 61.102c-1.001-1.207-2.507-1.867-4.048-1.867H31.724c-1.54 0-3.047.66-4.048 1.867L6.769 86.214v13.792h94.768V86.214z","transform","translate(13.56)",1,"ant-empty-img-default-path-2"],["d","M33.83 0h67.933a4 4 0 0 1 4 4v93.344a4 4 0 0 1-4 4H33.83a4 4 0 0 1-4-4V4a4 4 0 0 1 4-4z",1,"ant-empty-img-default-path-3"],["d","M42.678 9.953h50.237a2 2 0 0 1 2 2V36.91a2 2 0 0 1-2 2H42.678a2 2 0 0 1-2-2V11.953a2 2 0 0 1 2-2zM42.94 49.767h49.713a2.262 2.262 0 1 1 0 4.524H42.94a2.262 2.262 0 0 1 0-4.524zM42.94 61.53h49.713a2.262 2.262 0 1 1 0 4.525H42.94a2.262 2.262 0 0 1 0-4.525zM121.813 105.032c-.775 3.071-3.497 5.36-6.735 5.36H20.515c-3.238 0-5.96-2.29-6.734-5.36a7.309 7.309 0 0 1-.222-1.79V69.675h26.318c2.907 0 5.25 2.448 5.25 5.42v.04c0 2.971 2.37 5.37 5.277 5.37h34.785c2.907 0 5.277-2.421 5.277-5.393V75.1c0-2.972 2.343-5.426 5.25-5.426h26.318v33.569c0 .617-.077 1.216-.221 1.789z",1,"ant-empty-img-default-path-4"],["d","M149.121 33.292l-6.83 2.65a1 1 0 0 1-1.317-1.23l1.937-6.207c-2.589-2.944-4.109-6.534-4.109-10.408C138.802 8.102 148.92 0 161.402 0 173.881 0 184 8.102 184 18.097c0 9.995-10.118 18.097-22.599 18.097-4.528 0-8.744-1.066-12.28-2.902z",1,"ant-empty-img-default-path-5"],["transform","translate(149.65 15.383)",1,"ant-empty-img-default-g"],["cx","20.654","cy","3.167","rx","2.849","ry","2.815"],["d","M5.698 5.63H0L2.898.704zM9.259.704h4.985V5.63H9.259z"]],template:function(t,n){t&1&&(Te(),C(0,"svg",0)(1,"g",1)(2,"g",2),f(3,"ellipse",3)(4,"path",4)(5,"path",5)(6,"path",6)(7,"path",7),y(),f(8,"path",8),C(9,"g",9),f(10,"ellipse",10)(11,"path",11),y()()())},encapsulation:2,changeDetection:0})}}return i})(),Yi=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275cmp=x({type:i,selectors:[["nz-empty-simple"]],exportAs:["nzEmptySimple"],standalone:!0,features:[D],decls:6,vars:0,consts:[["width","64","height","41","viewBox","0 0 64 41","xmlns","http://www.w3.org/2000/svg",1,"ant-empty-img-simple"],["transform","translate(0 1)","fill","none","fill-rule","evenodd"],["cx","32","cy","33","rx","32","ry","7",1,"ant-empty-img-simple-ellipse"],["fill-rule","nonzero",1,"ant-empty-img-simple-g"],["d","M55 12.76L44.854 1.258C44.367.474 43.656 0 42.907 0H21.093c-.749 0-1.46.474-1.947 1.257L9 12.761V22h46v-9.24z"],["d","M41.613 15.931c0-1.605.994-2.93 2.227-2.931H55v18.137C55 33.26 53.68 35 52.05 35h-40.1C10.32 35 9 33.259 9 31.137V13h11.16c1.233 0 2.227 1.323 2.227 2.928v.022c0 1.605 1.005 2.901 2.237 2.901h14.752c1.232 0 2.237-1.308 2.237-2.913v-.007z",1,"ant-empty-img-simple-path"]],template:function(t,n){t&1&&(Te(),C(0,"svg",0)(1,"g",1),f(2,"ellipse",2),C(3,"g",3),f(4,"path",4)(5,"path",5),y()()())},encapsulation:2,changeDetection:0})}}return i})(),Zi=["default","simple"],mn=(()=>{class i{constructor(e,t){this.i18n=e,this.cdr=t,this.nzNotFoundImage="default",this.isContentString=!1,this.isImageBuildIn=!0,this.destroy$=new G}ngOnChanges(e){let{nzNotFoundContent:t,nzNotFoundImage:n}=e;if(t){let r=t.currentValue;this.isContentString=typeof r=="string"}if(n){let r=n.currentValue||"default";this.isImageBuildIn=Zi.findIndex(s=>s===r)>-1}}ngOnInit(){this.i18n.localeChange.pipe(L(this.destroy$)).subscribe(()=>{this.locale=this.i18n.getLocaleData("Empty"),this.cdr.markForCheck()})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static{this.\u0275fac=function(t){return new(t||i)(k(Rt),k(H))}}static{this.\u0275cmp=x({type:i,selectors:[["nz-empty"]],hostAttrs:[1,"ant-empty"],inputs:{nzNotFoundImage:"nzNotFoundImage",nzNotFoundContent:"nzNotFoundContent",nzNotFoundFooter:"nzNotFoundFooter"},exportAs:["nzEmpty"],standalone:!0,features:[B,D],decls:5,vars:3,consts:[[1,"ant-empty-image"],[1,"ant-empty-description"],[1,"ant-empty-footer"],[4,"nzStringTemplateOutlet"],[3,"src","alt"]],template:function(t,n){t&1&&(C(0,"div",0),u(1,bi,1,1,"ng-container")(2,Oi,2,1),y(),u(3,Bi,2,1,"p",1)(4,Pi,2,1,"div",2)),t&2&&(h(),S(n.isImageBuildIn?2:1),h(2),S(n.nzNotFoundContent!==null?3:-1),h(),S(n.nzNotFoundFooter?4:-1))},dependencies:[se,oe,Qi,Yi],encapsulation:2,changeDetection:0})}}return i})();function Ji(i){switch(i){case"table":case"list":return"normal";case"select":case"tree-select":case"cascader":case"transfer":return"small";default:return""}}var Xi=(()=>{class i{constructor(e,t,n,r){this.configService=e,this.viewContainerRef=t,this.cdr=n,this.injector=r,this.contentType="string",this.size="",this.destroy$=new G}ngOnChanges(e){e.nzComponentName&&(this.size=Ji(e.nzComponentName.currentValue)),e.specificContent&&!e.specificContent.isFirstChange()&&(this.content=e.specificContent.currentValue,this.renderEmpty())}ngOnInit(){this.subscribeDefaultEmptyContentChange()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}renderEmpty(){let e=this.content;if(typeof e=="string")this.contentType="string";else if(e instanceof ct){let t={$implicit:this.nzComponentName};this.contentType="template",this.contentPortal=new Lt(e,this.viewContainerRef,t)}else if(e instanceof ot){let t=ve.create({parent:this.injector,providers:[{provide:Wi,useValue:this.nzComponentName}]});this.contentType="component",this.contentPortal=new It(e,this.viewContainerRef,t)}else this.contentType="string",this.contentPortal=void 0;this.cdr.detectChanges()}subscribeDefaultEmptyContentChange(){this.configService.getConfigChangeEventForComponent("empty").pipe(ke(!0),L(this.destroy$)).subscribe(()=>{this.content=this.specificContent||this.getUserDefaultEmptyContent(),this.renderEmpty()})}getUserDefaultEmptyContent(){return(this.configService.getConfigForComponent("empty")||{}).nzDefaultEmptyContent}static{this.\u0275fac=function(t){return new(t||i)(k(ae),k(ht),k(H),k(ve))}}static{this.\u0275cmp=x({type:i,selectors:[["nz-embed-empty"]],inputs:{nzComponentName:"nzComponentName",specificContent:"specificContent"},exportAs:["nzEmbedEmpty"],standalone:!0,features:[B,D],decls:2,vars:1,consts:[[3,"cdkPortalOutlet"],["nzNotFoundImage","simple",1,"ant-empty-normal"],["nzNotFoundImage","simple",1,"ant-empty-small"]],template:function(t,n){t&1&&u(0,ji,2,1)(1,qi,1,1),t&2&&S(n.content?0:1)},dependencies:[mn,Vt,Ot],encapsulation:2,changeDetection:0})}}return i})(),rs=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275mod=R({type:i})}static{this.\u0275inj=A({imports:[mn,Xi]})}}return i})();var er=["*"];function tr(i,o){i&1&&(C(0,"span",2),f(1,"i",3)(2,"i",3)(3,"i",3)(4,"i",3),y())}function nr(i,o){}function ir(i,o){if(i&1&&(C(0,"div",6),K(1),y()),i&2){let e=l(2);h(),Me(e.nzTip)}}function rr(i,o){if(i&1&&(C(0,"div")(1,"div",4),u(2,nr,0,0,"ng-template",5)(3,ir,2,1,"div",6),y()()),i&2){let e=l(),t=W(1);h(),N("ant-spin-rtl",e.dir==="rtl")("ant-spin-spinning",e.isLoading)("ant-spin-lg",e.nzSize==="large")("ant-spin-sm",e.nzSize==="small")("ant-spin-show-text",e.nzTip),h(),p("ngTemplateOutlet",e.nzIndicator||t),h(),S(e.nzTip?3:-1)}}function or(i,o){if(i&1&&(C(0,"div",7),we(1),y()),i&2){let e=l();N("ant-spin-blur",e.isLoading)}}var fn="spin",gs=(()=>{class i{constructor(e,t,n){this.nzConfigService=e,this.cdr=t,this.directionality=n,this._nzModuleName=fn,this.nzIndicator=null,this.nzSize="default",this.nzTip=null,this.nzDelay=0,this.nzSimple=!1,this.nzSpinning=!0,this.destroy$=new G,this.spinning$=new Se(this.nzSpinning),this.delay$=new Ye(1),this.isLoading=!1,this.dir="ltr"}ngOnInit(){this.delay$.pipe(ke(this.nzDelay),et(),tt(t=>t===0?this.spinning$:this.spinning$.pipe(Xe(n=>Je(n?t:0)))),L(this.destroy$)).subscribe(t=>{this.isLoading=t,this.cdr.markForCheck()}),this.nzConfigService.getConfigChangeEventForComponent(fn).pipe(L(this.destroy$)).subscribe(()=>this.cdr.markForCheck()),this.directionality.change?.pipe(L(this.destroy$)).subscribe(t=>{this.dir=t,this.cdr.detectChanges()}),this.dir=this.directionality.value}ngOnChanges(e){let{nzSpinning:t,nzDelay:n}=e;t&&this.spinning$.next(this.nzSpinning),n&&this.delay$.next(this.nzDelay)}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static{this.\u0275fac=function(t){return new(t||i)(k(ae),k(H),k(Ve))}}static{this.\u0275cmp=x({type:i,selectors:[["nz-spin"]],hostVars:2,hostBindings:function(t,n){t&2&&N("ant-spin-nested-loading",!n.nzSimple)},inputs:{nzIndicator:"nzIndicator",nzSize:"nzSize",nzTip:"nzTip",nzDelay:[2,"nzDelay","nzDelay",Ie],nzSimple:[2,"nzSimple","nzSimple",c],nzSpinning:[2,"nzSpinning","nzSpinning",c]},exportAs:["nzSpin"],standalone:!0,features:[F,B,D],ngContentSelectors:er,decls:4,vars:2,consts:[["defaultTemplate",""],[1,"ant-spin-container",3,"ant-spin-blur"],[1,"ant-spin-dot","ant-spin-dot-spin"],[1,"ant-spin-dot-item"],[1,"ant-spin"],[3,"ngTemplateOutlet"],[1,"ant-spin-text"],[1,"ant-spin-container"]],template:function(t,n){t&1&&(De(),u(0,tr,5,0,"ng-template",null,0,Y)(2,rr,4,12,"div")(3,or,2,2,"div",1)),t&2&&(h(2),S(n.isLoading?2:-1),h(),S(n.nzSimple?-1:3))},dependencies:[ge],encapsulation:2})}}return te([le()],i.prototype,"nzIndicator",void 0),i})(),zs=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275mod=R({type:i})}static{this.\u0275inj=A({})}}return i})();export{nn as a,oi as b,Ar as c,mn as d,Xi as e,rs as f,gs as g,zs as h,X as i,ki as j,vo as k,pn as l,un as m,rn as n,sn as o,ln as p,cn as q,dn as r,hn as s,$o as t};

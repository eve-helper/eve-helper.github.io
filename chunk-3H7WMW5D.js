import{b as ke,c as Le,d as Be,e as je,f as Ge,g as $e,h as Z,l as Ze,m as He,n as Ue,o as Je,p as Xe}from"./chunk-63TCCPBN.js";import"./chunk-OSFVWQ5Z.js";import{a as qe,b as Ke,c as Qe,i as We}from"./chunk-BB65JJBY.js";import{F as De,P as Ne,X as Fe,kb as Oe,l as J,m as we,n as Me,ob as Ie,qb as Ae,rb as Pe,sb as Re}from"./chunk-P3XE2YTL.js";import{j as Te,k as ve,o as Se,p as Ee,q as Ve,s as be,t as $}from"./chunk-WV4YJ4QP.js";import{Ba as k,Bb as s,C as te,Ca as le,Da as ce,Db as he,Gc as _e,Hb as g,Ic as xe,Ja as L,Ka as B,Ma as me,Mb as d,Mc as ye,Nb as h,Ob as m,Pb as j,Qb as G,Rb as ue,Sb as ge,Yb as fe,Z as ie,_ as ne,_b as r,a as Q,ba as ae,c as A,f as P,fc as _,gb as l,gc as u,h as H,ha as y,hb as v,hc as S,ic as E,j as W,ja as re,ma as R,oc as ze,pc as N,ra as D,rc as Ce,s as Y,sa as T,sb as pe,t as U,ta as oe,tc as b,ua as se,ub as de,vc as w,xb as c,xc as x,z as ee}from"./chunk-NPSVTU3I.js";import{$ as Lt,Aa as X,Ab as at,Bb as rt,Ca as si,Da as li,Db as ot,Ea as ci,Fa as mi,Ga as pi,Ha as di,Ia as hi,Ib as st,Ja as ui,Ka as gi,La as fi,Lb as lt,Ma as zi,Na as Ci,Oa as _i,S as Vt,T as bt,U as wt,W as Mt,X as Dt,Xa as Ye,Y as Nt,Ya as et,Z as Ft,Za as tt,_ as kt,a as _t,aa as Ot,b as xt,ba as It,ca as At,da as Pt,ea as Rt,fa as Bt,ga as jt,ha as Gt,ia as $t,ja as Zt,ka as Ht,la as Ut,ma as Jt,n as yt,na as Xt,oa as qt,p as Tt,pa as Kt,q as vt,qa as Qt,ra as Wt,sa as Yt,ta as ei,tb as it,u as St,ua as ti,va as ii,vb as nt,w as Et,wa as ni,xa as ai,ya as ri,za as oi}from"./chunk-4UKFF7AS.js";import{d as Ct,e as M}from"./chunk-JKOY2XUY.js";var q=class{constructor(){this.subject=new H(1),this.subscriptions=new Q}doFilter(n){this.subject.next(n)}dispose(){this.subscriptions.unsubscribe()}notEmpty(n,t){this.subscriptions.add(this.subject.subscribe(i=>{if(i[n]){let a=i[n].currentValue;a!=null&&t(a)}}))}has(n,t){this.subscriptions.add(this.subject.subscribe(i=>{if(i[n]){let a=i[n].currentValue;t(a)}}))}notFirst(n,t){this.subscriptions.add(this.subject.subscribe(i=>{if(i[n]&&!i[n].isFirstChange()){let a=i[n].currentValue;t(a)}}))}notFirstAndEmpty(n,t){this.subscriptions.add(this.subject.subscribe(i=>{if(i[n]&&!i[n].isFirstChange()){let a=i[n].currentValue;a!=null&&t(a)}}))}},ct=new re("NGX_ECHARTS_CONFIG"),mt=(()=>{class e{constructor(t,i,a){this.el=i,this.ngZone=a,this.options=null,this.theme=null,this.initOpts=null,this.merge=null,this.autoResize=!0,this.loading=!1,this.loadingType="default",this.loadingOpts=null,this.chartInit=new L,this.optionsError=new L,this.chartClick=this.createLazyEvent("click"),this.chartDblClick=this.createLazyEvent("dblclick"),this.chartMouseDown=this.createLazyEvent("mousedown"),this.chartMouseMove=this.createLazyEvent("mousemove"),this.chartMouseUp=this.createLazyEvent("mouseup"),this.chartMouseOver=this.createLazyEvent("mouseover"),this.chartMouseOut=this.createLazyEvent("mouseout"),this.chartGlobalOut=this.createLazyEvent("globalout"),this.chartContextMenu=this.createLazyEvent("contextmenu"),this.chartHighlight=this.createLazyEvent("highlight"),this.chartDownplay=this.createLazyEvent("downplay"),this.chartSelectChanged=this.createLazyEvent("selectchanged"),this.chartLegendSelectChanged=this.createLazyEvent("legendselectchanged"),this.chartLegendSelected=this.createLazyEvent("legendselected"),this.chartLegendUnselected=this.createLazyEvent("legendunselected"),this.chartLegendLegendSelectAll=this.createLazyEvent("legendselectall"),this.chartLegendLegendInverseSelect=this.createLazyEvent("legendinverseselect"),this.chartLegendScroll=this.createLazyEvent("legendscroll"),this.chartDataZoom=this.createLazyEvent("datazoom"),this.chartDataRangeSelected=this.createLazyEvent("datarangeselected"),this.chartGraphRoam=this.createLazyEvent("graphroam"),this.chartGeoRoam=this.createLazyEvent("georoam"),this.chartTreeRoam=this.createLazyEvent("treeroam"),this.chartTimelineChanged=this.createLazyEvent("timelinechanged"),this.chartTimelinePlayChanged=this.createLazyEvent("timelineplaychanged"),this.chartRestore=this.createLazyEvent("restore"),this.chartDataViewChanged=this.createLazyEvent("dataviewchanged"),this.chartMagicTypeChanged=this.createLazyEvent("magictypechanged"),this.chartGeoSelectChanged=this.createLazyEvent("geoselectchanged"),this.chartGeoSelected=this.createLazyEvent("geoselected"),this.chartGeoUnselected=this.createLazyEvent("geounselected"),this.chartAxisAreaSelected=this.createLazyEvent("axisareaselected"),this.chartBrush=this.createLazyEvent("brush"),this.chartBrushEnd=this.createLazyEvent("brushend"),this.chartBrushSelected=this.createLazyEvent("brushselected"),this.chartGlobalCursorTaken=this.createLazyEvent("globalcursortaken"),this.chartRendered=this.createLazyEvent("rendered"),this.chartFinished=this.createLazyEvent("finished"),this.animationFrameID=null,this.chart$=new H(1),this.resize$=new P,this.changeFilter=new q,this.resizeObFired=!1,this.echarts=t.echarts,this.theme=t.theme||null}ngOnChanges(t){this.changeFilter.doFilter(t)}ngOnInit(){if(!window.ResizeObserver)throw new Error("please install a polyfill for ResizeObserver");this.resizeSub=this.resize$.pipe(ae(100,W,{leading:!1,trailing:!0})).subscribe(()=>this.resize()),this.autoResize&&(this.resizeOb=this.ngZone.runOutsideAngular(()=>new window.ResizeObserver(t=>{for(let i of t)i.target===this.el.nativeElement&&(this.resizeObFired?this.animationFrameID=window.requestAnimationFrame(()=>{this.resize$.next()}):this.resizeObFired=!0)})),this.resizeOb.observe(this.el.nativeElement)),this.changeFilter.notFirstAndEmpty("options",t=>this.onOptionsChange(t)),this.changeFilter.notFirstAndEmpty("merge",t=>this.setOption(t)),this.changeFilter.has("loading",t=>this.toggleLoading(!!t)),this.changeFilter.notFirst("theme",()=>this.refreshChart())}ngOnDestroy(){window.clearTimeout(this.initChartTimer),this.resizeSub&&this.resizeSub.unsubscribe(),this.animationFrameID&&window.cancelAnimationFrame(this.animationFrameID),this.resizeOb&&this.resizeOb.unobserve(this.el.nativeElement),this.loadingSub&&this.loadingSub.unsubscribe(),this.changeFilter.dispose(),this.dispose()}ngAfterViewInit(){this.initChartTimer=window.setTimeout(()=>this.initChart())}dispose(){this.chart&&(this.chart.isDisposed()||this.chart.dispose(),this.chart=null)}resize(){this.chart&&this.chart.resize()}toggleLoading(t){this.chart?t?this.chart.showLoading(this.loadingType,this.loadingOpts):this.chart.hideLoading():this.loadingSub=this.chart$.subscribe(i=>t?i.showLoading(this.loadingType,this.loadingOpts):i.hideLoading())}setOption(t,i){if(this.chart)try{this.chart.setOption(t,i)}catch(a){console.error(a),this.optionsError.emit(a)}}refreshChart(){return M(this,null,function*(){this.dispose(),yield this.initChart()})}createChart(){let t=this.el.nativeElement;if(window&&window.getComputedStyle){let i=window.getComputedStyle(t,null).getPropertyValue("height");(!i||i==="0px")&&(!t.style.height||t.style.height==="0px")&&(t.style.height="400px")}return this.ngZone.runOutsideAngular(()=>(typeof this.echarts=="function"?this.echarts:()=>Promise.resolve(this.echarts))().then(({init:a})=>a(t,this.theme,this.initOpts)))}initChart(){return M(this,null,function*(){yield this.onOptionsChange(this.options),this.merge&&this.chart&&this.setOption(this.merge)})}onOptionsChange(t){return M(this,null,function*(){t&&(this.chart?this.setOption(this.options,!0):(this.chart=yield this.createChart(),this.chart$.next(this.chart),this.chartInit.emit(this.chart),this.setOption(this.options,!0)))})}createLazyEvent(t){return this.chartInit.pipe(ie(i=>new A(a=>(i.on(t,o=>this.ngZone.run(()=>a.next(o))),()=>{this.chart&&(this.chart.isDisposed()||i.off(t))}))))}static{this.\u0275fac=function(i){return new(i||e)(v(ct),v(me),v(B))}}static{this.\u0275dir=oe({type:e,selectors:[["echarts"],["","echarts",""]],inputs:{options:"options",theme:"theme",initOpts:"initOpts",merge:"merge",autoResize:"autoResize",loading:"loading",loadingType:"loadingType",loadingOpts:"loadingOpts"},outputs:{chartInit:"chartInit",optionsError:"optionsError",chartClick:"chartClick",chartDblClick:"chartDblClick",chartMouseDown:"chartMouseDown",chartMouseMove:"chartMouseMove",chartMouseUp:"chartMouseUp",chartMouseOver:"chartMouseOver",chartMouseOut:"chartMouseOut",chartGlobalOut:"chartGlobalOut",chartContextMenu:"chartContextMenu",chartHighlight:"chartHighlight",chartDownplay:"chartDownplay",chartSelectChanged:"chartSelectChanged",chartLegendSelectChanged:"chartLegendSelectChanged",chartLegendSelected:"chartLegendSelected",chartLegendUnselected:"chartLegendUnselected",chartLegendLegendSelectAll:"chartLegendLegendSelectAll",chartLegendLegendInverseSelect:"chartLegendLegendInverseSelect",chartLegendScroll:"chartLegendScroll",chartDataZoom:"chartDataZoom",chartDataRangeSelected:"chartDataRangeSelected",chartGraphRoam:"chartGraphRoam",chartGeoRoam:"chartGeoRoam",chartTreeRoam:"chartTreeRoam",chartTimelineChanged:"chartTimelineChanged",chartTimelinePlayChanged:"chartTimelinePlayChanged",chartRestore:"chartRestore",chartDataViewChanged:"chartDataViewChanged",chartMagicTypeChanged:"chartMagicTypeChanged",chartGeoSelectChanged:"chartGeoSelectChanged",chartGeoSelected:"chartGeoSelected",chartGeoUnselected:"chartGeoUnselected",chartAxisAreaSelected:"chartAxisAreaSelected",chartBrush:"chartBrush",chartBrushEnd:"chartBrushEnd",chartBrushSelected:"chartBrushSelected",chartGlobalCursorTaken:"chartGlobalCursorTaken",chartRendered:"chartRendered",chartFinished:"chartFinished"},exportAs:["echarts"],standalone:!0,features:[k]})}}return e})();var pt=e=>({provide:ct,useValue:e});var K={};Ct(K,{Axis:()=>gi,ChartView:()=>Nt,ComponentModel:()=>wt,ComponentView:()=>Dt,List:()=>si,Model:()=>Vt,PRIORITY:()=>It,SeriesModel:()=>Mt,color:()=>St,connect:()=>Pt,dataTool:()=>oi,dependencies:()=>Ot,disConnect:()=>Bt,disconnect:()=>Rt,dispose:()=>jt,env:()=>_t,extendChartView:()=>_i,extendComponentModel:()=>fi,extendComponentView:()=>zi,extendSeriesModel:()=>Ci,format:()=>hi,getCoordinateSystemDimensions:()=>Wt,getInstanceByDom:()=>Gt,getInstanceById:()=>$t,getMap:()=>ai,graphic:()=>di,helper:()=>li,init:()=>At,innerDrawElementOnCanvas:()=>kt,matrix:()=>vt,number:()=>mi,parseGeoJSON:()=>ci,parseGeoJson:()=>ci,registerAction:()=>Kt,registerCoordinateSystem:()=>Qt,registerLayout:()=>Yt,registerLoading:()=>ti,registerLocale:()=>bt,registerMap:()=>ni,registerPostInit:()=>Jt,registerPostUpdate:()=>Xt,registerPreprocessor:()=>Ht,registerProcessor:()=>Ut,registerTheme:()=>Zt,registerTransform:()=>ri,registerUpdateLifecycle:()=>qt,registerVisual:()=>ei,setCanvasCreator:()=>ii,setPlatformAPI:()=>xt,throttle:()=>Ft,time:()=>pi,use:()=>X,util:()=>ui,vector:()=>Tt,version:()=>Lt,zrUtil:()=>yt,zrender:()=>Et});var dt=(()=>{class e{transform(t,i="HH:mm:ss"){let a=Number(t||0);return Oe.reduce((o,[C,p])=>{if(o.indexOf(C)!==-1){let z=Math.floor(a/p);return a-=z*p,o.replace(new RegExp(`${C}+`,"g"),f=>De(z.toString(),f.length,"0"))}return o},i)}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275pipe=se({name:"nzTimeRange",type:e,pure:!0,standalone:!0})}}return e})(),ht=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275mod=T({type:e})}static{this.\u0275inj=y({})}}return e})();var Ti=e=>({$implicit:e});function vi(e,n){if(e&1&&ue(0,1),e&2){let t=r();s("ngTemplateOutlet",t.nzValueTemplate)("ngTemplateOutletContext",Ce(2,Ti,t.nzValue))}}function Si(e,n){if(e&1&&(d(0,"span",2),u(1),h()),e&2){let t=r(2);l(),S(t.displayInt)}}function Ei(e,n){if(e&1&&(d(0,"span",3),u(1),h()),e&2){let t=r(2);l(),S(t.displayDecimal)}}function Vi(e,n){if(e&1&&c(0,Si,2,1,"span",2)(1,Ei,2,1,"span",3),e&2){let t=r();g(t.displayInt?0:-1),l(),g(t.displayDecimal?1:-1)}}function bi(e,n){if(e&1&&(j(0),u(1),G()),e&2){let t=r();l(),S(t.nzTitle)}}function wi(e,n){e&1&&m(0,"nz-skeleton",2),e&2&&s("nzParagraph",!1)}function Mi(e,n){if(e&1&&(j(0),u(1),G()),e&2){let t=r(3);l(),S(t.nzPrefix)}}function Di(e,n){if(e&1&&(d(0,"span",4),c(1,Mi,2,1,"ng-container",1),h()),e&2){let t=r(2);l(),s("nzStringTemplateOutlet",t.nzPrefix)}}function Ni(e,n){if(e&1&&(j(0),u(1),G()),e&2){let t=r(3);l(),S(t.nzSuffix)}}function Fi(e,n){if(e&1&&(d(0,"span",6),c(1,Ni,2,1,"ng-container",1),h()),e&2){let t=r(2);l(),s("nzStringTemplateOutlet",t.nzSuffix)}}function ki(e,n){if(e&1&&(d(0,"div",3),c(1,Di,2,1,"span",4),m(2,"nz-statistic-number",5),c(3,Fi,2,1,"span",6),h()),e&2){let t=r();s("ngStyle",t.nzValueStyle),l(),g(t.nzPrefix?1:-1),l(),s("nzValue",t.nzValue)("nzValueTemplate",t.nzValueTemplate),l(),g(t.nzSuffix?3:-1)}}function Li(e,n){if(e&1&&(u(0),b(1,"nzTimeRange")),e&2){let t=r();S(w(1,1,t.diff,t.nzFormat))}}var Oi=(()=>{class e{constructor(){this.displayInt="",this.displayDecimal="",this.locale_id=R(_e)}ngOnChanges(){this.formatNumber()}formatNumber(){let t=typeof this.nzValue=="number"?".":ve(this.locale_id,Te.Decimal),i=String(this.nzValue),[a,o]=i.split(t);this.displayInt=a,this.displayDecimal=o?`${t}${o}`:""}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275cmp=D({type:e,selectors:[["nz-statistic-number"]],inputs:{nzValue:"nzValue",nzValueTemplate:"nzValueTemplate"},exportAs:["nzStatisticNumber"],standalone:!0,features:[k,N],decls:3,vars:1,consts:[[1,"ant-statistic-content-value"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"ant-statistic-content-value-int"],[1,"ant-statistic-content-value-decimal"]],template:function(i,a){i&1&&(d(0,"span",0),c(1,vi,1,4,"ng-container",1)(2,Vi,2,2),h()),i&2&&(l(),g(a.nzValueTemplate?1:2))},dependencies:[Ve],encapsulation:2,changeDetection:0})}}return e})(),I=(()=>{class e{constructor(){this.nzValueStyle={},this.nzLoading=!1,this.dir="ltr",this.destroy$=new P,this.cdr=R(xe),this.directionality=R(Fe)}ngOnInit(){this.directionality.change?.pipe(ne(this.destroy$)).subscribe(t=>{this.dir=t,this.cdr.detectChanges()}),this.dir=this.directionality.value}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275cmp=D({type:e,selectors:[["nz-statistic"]],hostAttrs:[1,"ant-statistic"],hostVars:2,hostBindings:function(i,a){i&2&&he("ant-statistic-rtl",a.dir==="rtl")},inputs:{nzPrefix:"nzPrefix",nzSuffix:"nzSuffix",nzTitle:"nzTitle",nzValue:"nzValue",nzValueStyle:"nzValueStyle",nzValueTemplate:"nzValueTemplate",nzLoading:[2,"nzLoading","nzLoading",ye]},exportAs:["nzStatistic"],standalone:!0,features:[de,N],decls:4,vars:2,consts:[[1,"ant-statistic-title"],[4,"nzStringTemplateOutlet"],[1,"ant-statistic-skeleton",3,"nzParagraph"],[1,"ant-statistic-content",3,"ngStyle"],[1,"ant-statistic-content-prefix"],[3,"nzValue","nzValueTemplate"],[1,"ant-statistic-content-suffix"]],template:function(i,a){i&1&&(d(0,"div",0),c(1,bi,2,1,"ng-container",1),h(),c(2,wi,1,1,"nz-skeleton",2)(3,ki,4,5,"div",3)),i&2&&(l(),s("nzStringTemplateOutlet",a.nzTitle),l(),g(a.nzLoading?2:3))},dependencies:[Z,$e,Oi,Me,we,Ee],encapsulation:2,changeDetection:0})}}return e})(),Ii=1e3/30,Ai=(()=>{class e extends I{constructor(t,i){super(),this.ngZone=t,this.platform=i,this.nzFormat="HH:mm:ss",this.nzCountdownFinish=new L,this.target=0}ngOnChanges(t){t.nzValue&&(this.target=Number(t.nzValue.currentValue),t.nzValue.isFirstChange()||this.syncTimer())}ngOnInit(){super.ngOnInit(),this.syncTimer()}ngOnDestroy(){this.stopTimer()}syncTimer(){this.target>=Date.now()?this.startTimer():this.stopTimer()}startTimer(){this.platform.isBrowser&&this.ngZone.runOutsideAngular(()=>{this.stopTimer(),this.updater_=te(Ii).subscribe(()=>{this.updateValue(),this.cdr.detectChanges()})})}stopTimer(){this.updater_&&(this.updater_.unsubscribe(),this.updater_=null)}updateValue(){this.diff=Math.max(this.target-Date.now(),0),this.diff===0&&(this.stopTimer(),this.nzCountdownFinish.observers.length&&this.ngZone.run(()=>this.nzCountdownFinish.emit()))}static{this.\u0275fac=function(i){return new(i||e)(v(B),v(Ne))}}static{this.\u0275cmp=D({type:e,selectors:[["nz-countdown"]],inputs:{nzFormat:"nzFormat"},outputs:{nzCountdownFinish:"nzCountdownFinish"},exportAs:["nzCountdown"],standalone:!0,features:[pe,k,N],decls:3,vars:6,consts:[["countDownTpl",""],[3,"nzValue","nzValueStyle","nzValueTemplate","nzTitle","nzPrefix","nzSuffix"]],template:function(i,a){if(i&1&&(m(0,"nz-statistic",1),c(1,Li,2,4,"ng-template",null,0,x)),i&2){let o=_(2);s("nzValue",a.diff)("nzValueStyle",a.nzValueStyle)("nzValueTemplate",a.nzValueTemplate||o)("nzTitle",a.nzTitle)("nzPrefix",a.nzPrefix)("nzSuffix",a.nzSuffix)}},dependencies:[I,ht,dt],encapsulation:2,changeDetection:0})}}return e})(),ut=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275mod=T({type:e})}static{this.\u0275inj=y({imports:[I,Ai]})}}return e})();function Ri(e,n){if(e&1&&m(0,"nz-skeleton-element",25),e&2){let t=r(2);s("nzActive",t.loading)}}function Bi(e,n){if(e&1&&(u(0),b(1,"number")),e&2){let t=r(2);E(" ",w(1,1,t.trendVo.lowSellPrice,"1.2-2")," ")}}function ji(e,n){if(e&1&&c(0,Ri,1,1,"nz-skeleton-element",25)(1,Bi,2,4),e&2){let t=r();g(t.trendVo.lowSellPrice==0?0:1)}}function Gi(e,n){if(e&1&&m(0,"nz-skeleton-element",25),e&2){let t=r(2);s("nzActive",t.loading)}}function $i(e,n){if(e&1&&(u(0),b(1,"number")),e&2){let t=r(2);E(" ",w(1,1,t.trendVo.highBuyPrice,"1.2-2")," ")}}function Zi(e,n){if(e&1&&c(0,Gi,1,1,"nz-skeleton-element",25)(1,$i,2,4),e&2){let t=r();g(t.trendVo.highBuyPrice==0?0:1)}}function Hi(e,n){if(e&1&&m(0,"nz-skeleton-element",25),e&2){let t=r(2);s("nzActive",t.loading)}}function Ui(e,n){if(e&1&&(u(0),b(1,"number")),e&2){let t=r(2);E(" ",w(1,1,t.trendVo.middlePrice,"1.2-2")," ")}}function Ji(e,n){if(e&1&&c(0,Hi,1,1,"nz-skeleton-element",25)(1,Ui,2,4),e&2){let t=r();g(t.trendVo.middlePrice==0?0:1)}}function Xi(e,n){if(e&1&&m(0,"nz-skeleton-element",25),e&2){let t=r(2);s("nzActive",t.loading)}}function qi(e,n){if(e&1&&u(0),e&2){let t=r(2);E(" ",t.trendVo.orderCount," ")}}function Ki(e,n){if(e&1&&c(0,Xi,1,1,"nz-skeleton-element",25)(1,qi,1,1),e&2){let t=r();g(t.trendVo.orderCount==0?0:1)}}function Qi(e,n){if(e&1&&m(0,"nz-skeleton-element",25),e&2){let t=r(2);s("nzActive",t.loading)}}function Wi(e,n){if(e&1&&(u(0),b(1,"number")),e&2){let t=r(2);E(" ",w(1,1,t.trendVo.lastDayAveragePrice,"1.2-2")," ")}}function Yi(e,n){if(e&1&&c(0,Qi,1,1,"nz-skeleton-element",25)(1,Wi,2,4),e&2){let t=r();g(t.trendVo.lastDayAveragePrice==0?0:1)}}function en(e,n){if(e&1&&m(0,"nz-skeleton-element",25),e&2){let t=r(2);s("nzActive",t.loading)}}function tn(e,n){if(e&1&&u(0),e&2){let t=r(2);E(" ",t.trendVo.lastDayVolume," ")}}function nn(e,n){if(e&1&&c(0,en,1,1,"nz-skeleton-element",25)(1,tn,1,1),e&2){let t=r();g(t.trendVo.lastDayVolume==0?0:1)}}function an(e,n){if(e&1&&m(0,"nz-skeleton-element",25),e&2){let t=r(2);s("nzActive",t.loading)}}function rn(e,n){if(e&1&&(u(0),b(1,"number")),e&2){let t=r(2);E(" ",w(1,1,t.trendVo.twentyDayAveragePrice,"1.2-2")," ")}}function on(e,n){if(e&1&&c(0,an,1,1,"nz-skeleton-element",25)(1,rn,2,4),e&2){let t=r();g(t.trendVo.twentyDayAveragePrice==0?0:1)}}function sn(e,n){if(e&1&&m(0,"nz-skeleton-element",25),e&2){let t=r(2);s("nzActive",t.loading)}}function ln(e,n){if(e&1&&u(0),e&2){let t=r(2);E(" ",t.trendVo.twentyDayVolume," ")}}function cn(e,n){if(e&1&&c(0,sn,1,1,"nz-skeleton-element",25)(1,ln,1,1),e&2){let t=r();g(t.trendVo.twentyDayVolume==0?0:1)}}function mn(e,n){e&1&&m(0,"nz-empty",26)}function pn(e,n){if(e&1&&m(0,"div",27),e&2){let t=r();s("options",t.options)}}X([tt,nt,Ye,st,rt,ot,at,lt,et,it]);var gt=(()=>{class e{constructor(t){this.marketService=t,this.options={legend:{data:["\u6700\u9AD8","\u6700\u4F4E","\u5E73\u5747(1\u5929)","\u5E73\u5747(20\u5929)","\u6210\u4EA4\u91CF"]},tooltip:{trigger:"axis",valueFormatter:i=>Number(i).toLocaleString("en-US",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2})},dataZoom:[{show:!0,realtime:!0,start:95,end:100,xAxisIndex:[0,1]}],xAxis:{type:"category",data:[]},yAxis:[{name:"\u4EF7\u683C",type:"value",scale:!0,min:i=>i.min*.8},{name:"\u6210\u4EA4\u91CF",type:"value",max:i=>i.max*5}],series:[{name:"\u6700\u9AD8",data:[],type:"line",lineStyle:{opacity:.15},showSymbol:!1},{name:"\u6700\u4F4E",data:[],type:"line",lineStyle:{opacity:.15},showSymbol:!1},{name:"\u5E73\u5747(1\u5929)",data:[],type:"line",showSymbol:!1},{name:"\u5E73\u5747(20\u5929)",data:[],type:"line",showSymbol:!1},{name:"\u6210\u4EA4\u91CF",data:[],yAxisIndex:1,type:"bar"}]},this.trendVo=this.createEmptyTrendVo(),this.currentNode=null,this.loading=!1,this.chartsLoading=!1,this.fallbackImageBase64=Ue}ngOnInit(){}get imgsrc(){if(this.currentNode==null)return"error";let t=this.marketService.getNodeImgsrc(this.currentNode,64);return t==""&&(t="error"),t}onNodeClick(t){this.marketService.getMarketNodeType(t)==Be.Type&&(this.loading=!0,this.chartsLoading=!0,new A(i=>{setTimeout(()=>M(this,null,function*(){this.resetTrendVo(),this.currentNode=t,this.trendVo.name=t.title;let a=this.marketService.getNodeImgsrc(t,64);a==""&&(a="error"),this.trendVo.imgsrc=a,yield Y(ee([this.marketService.getHistoryByNode(t).pipe(U(o=>{let C=[];for(let f in o.average_20d){let F=o.average_20d[f];C.push(Number(F.toFixed(2)))}let p=JSON.parse(JSON.stringify(this.options));p.tooltip.valueFormatter=this.options.tooltip.valueFormatter,p.yAxis[0].min=this.options.yAxis[0].min,p.yAxis[1].max=this.options.yAxis[1].max,p.xAxis.data=o.date.map(f=>f.substring(0,4)+`
`+f.substring(5)),p.series[0].data=o.highest,p.series[1].data=o.lowest,p.series[2].data=o.average,p.series[3].data=C,p.series[4].data=o.volume,this.options=p,this.chartsLoading=!1,this.trendVo.lastDayAveragePrice=o.average[o.average.length-1],this.trendVo.lastDayVolume=o.volume[o.volume.length-1],this.trendVo.twentyDayAveragePrice=C[C.length-1];let z=0;for(let f=o.volume.length-1;f>=o.volume.length-20&&f>=0;f--)z+=o.volume[f];this.trendVo.twentyDayVolume=z})),this.marketService.getOrderByNode(t).pipe(U(o=>{let C=0,p=0,z=0;for(let F in o){let V=o[F];C+=V.volume_remain,V.is_buy_order?p=V.price>p?V.price:p:z=V.price<z||z==0?V.price:z}let f=Number(((p+z)/2).toFixed());this.trendVo.highBuyPrice=p,this.trendVo.lowSellPrice=z,this.trendVo.middlePrice=f,this.trendVo.orderCount=C}))])),i.next(),i.complete()}))}).subscribe(()=>{this.loading=!1,this.chartsLoading=!1}))}createEmptyTrendVo(){return{imgsrc:"error",name:"",lowSellPrice:0,highBuyPrice:0,middlePrice:0,orderCount:0,lastDayAveragePrice:0,lastDayVolume:0,twentyDayAveragePrice:0,twentyDayVolume:0}}resetTrendVo(){this.trendVo=this.createEmptyTrendVo()}static{this.\u0275fac=function(i){return new(i||e)(v(Ze))}}static{this.\u0275cmp=D({type:e,selectors:[["app-market-trend"]],standalone:!0,features:[ze([pt({echarts:K})]),N],decls:46,vars:14,consts:[["lowSellPriceValueTpl",""],["highBuyPriceValueTpl",""],["middlePriceValueTpl",""],["orderCountValueTpl",""],["lastDayAveragePriceValueTpl",""],["lastDayVolumeValueTpl",""],["twentyDayAveragePriceValueTpl",""],["twentyDayVolumeValueTpl",""],[1,"left"],["mode","market",3,"onNodeClick"],[1,"right"],[1,"right-head"],["nz-image","","width","64px","height","64px",3,"nzSrc","nzFallback"],["nzSpan","6"],["nzTitle","\u6700\u4F4E\u5356\u4EF7",3,"nzValueTemplate"],["nzTitle","\u6700\u9AD8\u4E70\u4EF7",3,"nzValueTemplate"],["nzTitle","\u4E2D\u95F4\u4EF7",3,"nzValueTemplate"],["nzTitle","\u8BA2\u5355\u6570",3,"nzValueTemplate"],["nzTitle","\u6628\u65E5\u5E73\u5747\u4EF7\u683C",3,"nzValueTemplate"],["nzTitle","\u6628\u65E5\u6210\u4EA4\u91CF",3,"nzValueTemplate"],["nzTitle","20\u65E5\u5E73\u5747\u4EF7\u683C",3,"nzValueTemplate"],["nzTitle","20\u65E5\u6210\u4EA4\u91CF",3,"nzValueTemplate"],[3,"nzSpinning"],["nzNotFoundContent","\u4ECE\u5DE6\u4FA7\u70B9\u51FB\u6240\u9700\u67E5\u8BE2\u7684\u7269\u54C1\u4EE5\u5F00\u59CB",4,"ngIf"],["echarts","",3,"options",4,"ngIf"],["nzType","input",3,"nzActive"],["nzNotFoundContent","\u4ECE\u5DE6\u4FA7\u70B9\u51FB\u6240\u9700\u67E5\u8BE2\u7684\u7269\u54C1\u4EE5\u5F00\u59CB"],["echarts","",3,"options"]],template:function(i,a){if(i&1){let o=ge();d(0,"main")(1,"div",8)(2,"app-market-tree",9),fe("onNodeClick",function(p){return le(o),ce(a.onNodeClick(p))}),h()(),d(3,"div",10)(4,"div",11),m(5,"img",12),d(6,"span"),u(7),h()(),m(8,"nz-divider"),d(9,"nz-row")(10,"nz-col",13),m(11,"nz-statistic",14),c(12,ji,2,1,"ng-template",null,0,x),h(),d(14,"nz-col",13),m(15,"nz-statistic",15),c(16,Zi,2,1,"ng-template",null,1,x),h(),d(18,"nz-col",13),m(19,"nz-statistic",16),c(20,Ji,2,1,"ng-template",null,2,x),h(),d(22,"nz-col",13),m(23,"nz-statistic",17),c(24,Ki,2,1,"ng-template",null,3,x),h(),d(26,"nz-col",13),m(27,"nz-statistic",18),c(28,Yi,2,1,"ng-template",null,4,x),h(),d(30,"nz-col",13),m(31,"nz-statistic",19),c(32,nn,2,1,"ng-template",null,5,x),h(),d(34,"nz-col",13),m(35,"nz-statistic",20),c(36,on,2,1,"ng-template",null,6,x),h(),d(38,"nz-col",13),m(39,"nz-statistic",21),c(40,cn,2,1,"ng-template",null,7,x),h()(),m(42,"nz-divider"),d(43,"nz-spin",22),c(44,mn,1,0,"nz-empty",23)(45,pn,1,1,"div",24),h()()()}if(i&2){let o=_(13),C=_(17),p=_(21),z=_(25),f=_(29),F=_(33),V=_(37),zt=_(41);l(5),s("nzSrc",a.trendVo.imgsrc)("nzFallback",a.fallbackImageBase64),l(2),S(a.trendVo.name),l(4),s("nzValueTemplate",o),l(4),s("nzValueTemplate",C),l(4),s("nzValueTemplate",p),l(4),s("nzValueTemplate",z),l(4),s("nzValueTemplate",f),l(4),s("nzValueTemplate",F),l(4),s("nzValueTemplate",V),l(4),s("nzValueTemplate",zt),l(4),s("nzSpinning",a.chartsLoading),l(),s("ngIf",!a.currentNode),l(),s("ngIf",a.currentNode)}},dependencies:[$,Se,be,He,mt,Ae,Ie,We,Ke,qe,Qe,ut,I,Xe,Je,Le,ke,Z,je,Ge,Re,Pe],styles:["main[_ngcontent-%COMP%]{width:100%;height:100%;justify-content:flex-start;align-items:flex-start;display:flex}.left[_ngcontent-%COMP%]{width:300px;height:100%}.right[_ngcontent-%COMP%]{width:calc(100% - 300px);padding-left:10px;height:100%}"]})}}return e})();var dn=[{path:"",component:gt}],ft=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275mod=T({type:e})}static{this.\u0275inj=y({imports:[J.forChild(dn),J]})}}return e})();var ya=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275mod=T({type:e})}static{this.\u0275inj=y({imports:[$,ft]})}}return e})();export{ya as MarketTrendModule};
